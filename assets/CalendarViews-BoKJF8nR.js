import{k as U,_ as L,d as B,r as F,a as n,o,F as y,C as g,b as s,g as d,f as p,v as m,n as N,N as V,h as C,q as k,c as z,j as E,O as I,T as S,M as A,l as O,B as T,P as b,Q as q}from"./index-BTtPa-yH.js";import{u as R}from"./taskStore-DPqzuGQP.js";import{F as H}from"./file-text-BRcwdkgk.js";import{C as P}from"./chevron-left-CysQNCsg.js";import{C as J}from"./chevron-right-D2yu8vm9.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=U("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),Z={class:"space-y-4 min-h-screen"},G=["onClick"],K={class:"flex items-center gap-4 min-w-0"},W={class:"p-2 bg-blue-50 rounded-lg shrink-0"},X={class:"min-w-0"},ee={class:"flex items-center gap-2 mt-1"},te={class:"text-xs font-medium text-gray-400"},se={class:"flex items-center gap-3 shrink-0"},ae={key:0,class:"overflow-hidden bg-white border-t border-gray-100"},oe={class:"p-4 grid-cols-1 gap-6 space-y-4"},ne={class:"space-y-4"},re={class:"text-sm text-gray-700 leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100"},le={class:"space-y-4"},ie={key:0},de={class:"grid grid-cols-1 gap-2"},ce={class:"flex items-center gap-3 min-w-0"},ue={class:"p-1.5 text-blue-400 rounded-full group-hover:bg-blue-500 group-hover:text-white/50 transition-colors"},he={key:0,class:"px-4 pb-6 sm:px-6"},me={class:"bg-blue-50/50 rounded-xl p-4 border border-blue-100/50"},_e={class:"text-xs font-bold text-blue-700 uppercase mb-2 flex items-center gap-2"},ve={__name:"TaskcalendarViews",props:{tasks:{type:Array,default:()=>[]}},setup(j){const _=B(null),M=t=>{_.value=_.value===t?null:t},v=async(t,h)=>{try{const l=await(await fetch(t)).blob(),e=window.URL.createObjectURL(l),a=document.createElement("a");a.href=e,a.download=h,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(e)}catch{window.open(t,"_blank")}},D=t=>{t.style.height="0",t.style.opacity="0"},c=t=>{t.style.transition="all 350ms cubic-bezier(0.4, 0, 0.2, 1)",t.style.height=t.scrollHeight+"px",t.style.opacity="1"},u=t=>{t.style.height="auto"},Y=t=>{t.style.height=t.scrollHeight+"px"},$=t=>{requestAnimationFrame(()=>{t.style.transition="all 300ms cubic-bezier(0.4, 0, 0.2, 1)",t.style.height="0",t.style.opacity="0"})};return(t,h)=>{const f=F("UButton");return o(),n("div",Z,[(o(!0),n(y,null,g(j.tasks,l=>(o(),n("div",{key:l.id,class:"bg-white border border-gray-200 rounded-xl shadow-sm transition-all duration-200 hover:shadow-md overflow-hidden"},[s("div",{onClick:e=>M(l.id),class:"p-4 cursor-pointer flex items-center justify-between gap-4 select-none"},[s("div",K,[s("div",W,[d(p(H),{class:"text-blue-600",size:22})]),s("div",X,[s("div",ee,[s("span",te,m(l.document.in_number),1)])])]),s("div",se,[d(p(V),{class:N(["text-gray-400 transition-transform duration-300",{"rotate-180 text-blue-600":_.value===l.id}]),size:20},null,8,["class"])])],8,G),d(S,{onBeforeEnter:D,onEnter:c,onAfterEnter:u,onBeforeLeave:Y,onLeave:$},{default:C(()=>[_.value===l.id?(o(),n("div",ae,[s("div",oe,[s("div",ne,[s("div",null,[s("p",re,m(l.document.summary||"Ma'lumot kiritilmagan"),1)])]),s("div",le,[l.document.attachments.length?(o(),n("div",ie,[s("div",de,[(o(!0),n(y,null,g(l.document.attachments,e=>(o(),z(f,{key:e.id,onClick:a=>v(e.file,`Hujjat_${e.id}.pdf`),class:"group w-full justify-between flex items-center p-2.5 bg-white border border-gray-200 rounded-full hover:border-blue-200 hover:bg-blue-50/30 transition-all text-left"},{default:C(()=>[s("div",ce,[s("div",ue,[d(p(Q),{"stroke-width":"2.5",size:16})]),h[0]||(h[0]=s("span",{class:"text-xs font-medium text-gray-700 truncate"},"Fayl",-1))])]),_:1},8,["onClick"]))),128))])])):k("",!0)])]),l.responses.length?(o(),n("div",he,[s("div",me,[s("h4",_e,[d(p(I),{size:14}),h[1]||(h[1]=E(" Ijro natijasi ",-1))]),(o(!0),n(y,null,g(l.responses,e=>(o(),n("div",{key:e.id,class:"text-sm text-gray-700"},m(e.description),1))),128))])])):k("",!0)])):k("",!0)]),_:2},1024)]))),128))])}}},be=L(ve,[["__scopeId","data-v-457e4e24"]]),pe={class:"w-full h-screen flex flex-col p-4 bg-white dark:bg-gray-900"},ye={class:"flex justify-between items-center mb-4"},ge={class:"text-xl font-bold text-gray-800 dark:text-gray-100"},fe={class:"flex items-center justify-between gap-4"},xe={class:"grid grid-cols-7 py-2 text-center font-semibold text-gray-600 dark:text-gray-300"},ke={class:"grid grid-cols-7 overflow-y-auto divide-y divide-x"},we=["onClick"],Ce={class:"text-md font-medium text-gray-500 text-end"},Me={key:0,class:"absolute bottom-2 left-2 flex gap-1"},De={key:0,class:"text-xs text-gray-500"},Ye={__name:"CalendarViews",setup(j){const _=R(),M=A();O(()=>_.fetchAll());const v=T(()=>{const e={};return _.tasks.forEach(a=>{a.due_date&&(e[a.due_date]||(e[a.due_date]=[]),e[a.due_date].push(a))}),e});function D(e){const a=v.value[e];!a||!a.length||M.openDrawer(be,{tasks:a},{title:"Topshiriqlar",side:"right"})}const c=B(b().month()),u=B(b().year()),Y=["Dushanba","Seshanab","Chorshanba","Payshanba","Juma","Shanba","Yakshanba"],$=["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"],t=T(()=>{const e=b().year(u.value).month(c.value).date(1),a=e.endOf("month"),x=e.day(),r=[];for(let i=0;i<x;i++){const w=e.subtract(x-i,"day");r.push({date:w.format("YYYY-MM-DD"),dayNumber:w.date(),isCurrentMonth:!1})}for(let i=1;i<=a.date();i++){const w=b().year(u.value).month(c.value).date(i);r.push({date:w.format("YYYY-MM-DD"),dayNumber:i,isCurrentMonth:!0})}return r});function h(){const e=b().year(u.value).month(c.value).date(1).subtract(1,"month");c.value=e.month(),u.value=e.year()}function f(){const e=b().year(u.value).month(c.value).date(1).add(1,"month");c.value=e.month(),u.value=e.year()}function l(e){return b().format("YYYY-MM-DD")===e}return(e,a)=>{const x=F("UButton");return o(),n("div",pe,[s("div",ye,[s("h2",ge,m($[c.value])+" "+m(u.value),1),s("div",fe,[d(x,{onClick:h,variant:"hover"},{default:C(()=>[d(p(P),{class:"text-gray-500"})]),_:1}),d(p(q),{class:"text-gray-500"}),d(x,{onClick:f,variant:"hover"},{default:C(()=>[d(p(J),{class:"text-gray-500"})]),_:1})])]),s("div",xe,[(o(),n(y,null,g(Y,r=>s("div",{key:r},m(r),1)),64))]),s("div",ke,[(o(!0),n(y,null,g(t.value,r=>(o(),n("div",{key:r.date,class:N(["h-32 p-2 cursor-pointer hover:bg-gray-100 relative",{"bg-blue-100 dark:bg-blue-900":l(r.date),"bg-gray-100 dark:bg-gray-700":!r.isCurrentMonth}]),onClick:i=>D(r.date)},[s("div",Ce,m(r.dayNumber),1),v.value[r.date]?(o(),n("div",Me,[(o(!0),n(y,null,g(v.value[r.date].slice(0,3),i=>(o(),n("span",{key:i.id,class:"w-2 h-2 rounded-full bg-blue-400"}))),128)),v.value[r.date].length>3?(o(),n("span",De," +"+m(v.value[r.date].length-3),1)):k("",!0)])):k("",!0)],10,we))),128))])])}}},Fe=L(Ye,[["__scopeId","data-v-41b65ce8"]]);export{Fe as default};
