import{S as o,y as k,x as S,u as V,r as p,a as B,o as M,b as e,g as s,v as m,h as g,f as r,j as y,w as q}from"./index-CCDjh50H.js";import{u as C,X as U}from"./useFormValidate-PzpJs8mc.js";const j=()=>o.get("/senders/"),A=t=>o.post("/senders/",t),N=t=>o.get(`/senders/${t}/`),F=(t,a)=>o.put(`/senders/${t}/`,a),T=t=>o.delete(`/senders/${t}/`),Y=k("organizations",{state:()=>({organizations:[],selectedOrganizations:null,loading:!1,error:null}),actions:{async fetchAll(){this.loading=!0,this.error=null;try{const t=await j();this.organizations=t.data||[]}catch(t){console.error("Organizations olishda xato:",t),this.error=t}finally{this.loading=!1}},async fetchOne(t){this.loading=!0,this.error=null;try{const a=await N(t);this.selectedOrganizations=a.data||null}catch(a){console.error("Organization olishda xato:",a),this.error=a}finally{this.loading=!1}},async create(t){this.loading=!0,this.error=null;try{await A(t),await this.fetchAll()}catch(a){console.error("Organization yaratishda xato:",a),this.error=a}finally{this.loading=!1}},async update(t,a){this.loading=!0,this.error=null;try{await F(t,a),await this.fetchAll()}catch(i){console.error("Organization yangilashda xato:",i),this.error=i}finally{this.loading=!1}},async remove(t){this.loading=!0,this.error=null;try{await T(t),this.organizations=this.organizations.filter(a=>a.id!==t)}catch(a){console.error("Organization oâ€˜chirishda xato:",a),this.error=a}finally{this.loading=!1}}}}),$={class:"flex flex-col w-[700px]"},E={class:"flex justify-between modal-border items-center p-[14px] border-b"},I={class:"text-dark text-lg font-bold uppercase"},X={class:"flex flex-wrap -mx-2 p-4"},D={class:"w-full px-2 py-2"},G={class:"justify-end border-t modal-card modal-border flex items-center p-4"},K={__name:"OrganizationForm",props:{id:{type:Number,default:null}},setup(t){const a=Y(),i=S(),d=V(),{form:n,errors:w,validate:x,resetForm:_}=C({name:""},{name:{required:!0,message:"Majburiy"}}),f=t,c=!!f.id,z=async()=>{if(x())try{c?(await a.update(f.id,n),d.show("Muvaffaqiyatli yangilandi","success")):(await a.create(n),d.show("Muvaffaqiyatli yaratildi","success")),u(),_()}catch{d.show("Xatolik yuz berdi","")}},u=()=>i.close();return(b,l)=>{const h=p("UButton"),v=p("UInput");return M(),B("div",$,[e("div",E,[e("p",I,m(c?"Yangilash":"Yangi"),1),s(h,{customClass:"bg-[#475467] rounded-full p-1",onClick:u},{default:g(()=>[s(r(U),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e("form",{onSubmit:q(z,["prevent"]),class:"space-y-6"},[e("div",X,[e("div",D,[s(v,{modelValue:r(n).name,"onUpdate:modelValue":l[0]||(l[0]=O=>r(n).name=O),label:"Tashkelot",placeholder:"Tashkelot nomini kiriting",error:r(w).name},null,8,["modelValue","error"])])]),e("div",G,[s(h,{type:"button",variant:"ghost",onClick:u,disabled:r(a).loading},{default:g(()=>[...l[1]||(l[1]=[y(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(h,{type:"submit",variant:"primary",loading:r(a).loading},{default:g(()=>[y(m(c?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}};export{K as _,Y as u};
