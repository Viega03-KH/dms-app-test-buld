import{k as E,_ as j,d as B,r as F,a as r,o as n,F as b,B as x,b as t,g as u,f as p,v as h,n as U,N,h as k,q as C,c as S,T as V,M as z,l as A,C as L,O as _,P as I}from"./index-5YwSdCnv.js";import{u as O}from"./taskStore-CA_W_gp0.js";import{F as q}from"./file-text-BHvOZUJj.js";import{C as R}from"./chevron-left-CIUQZrWK.js";import{C as H}from"./chevron-right-p-AgzAN4.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=E("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),J={class:"space-y-4 min-h-screen"},Z=["onClick"],G={class:"flex items-center gap-4 min-w-0"},K={class:"p-2 bg-blue-50 rounded-lg shrink-0"},Q={class:"min-w-0"},W={class:"flex items-center gap-2 mt-1"},X={class:"text-xs font-medium text-gray-800"},ee={class:"flex items-center gap-2 mt-1"},te={class:"text-xs font-medium text-gray-600 line-clamp-1"},se={class:"flex items-center gap-3 shrink-0"},ae={key:0,class:"overflow-hidden bg-white border-t border-gray-100"},oe={class:"p-4 grid-cols-1 gap-6 space-y-4"},ne={class:"space-y-4"},re={class:"text-sm text-gray-700 leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100"},le={class:"space-y-4"},ie={key:0},de={class:"grid grid-cols-1 gap-2"},ce={class:"flex items-center gap-3 min-w-0"},ue={class:"p-1.5 text-blue-400 rounded-full group-hover:bg-blue-500 group-hover:text-white/50 transition-colors"},he={__name:"TaskcalendarViews",props:{tasks:{type:Array,default:()=>[]}},setup(T){const m=B(null),M=s=>{m.value=m.value===s?null:s},v=async(s,y)=>{try{const l=await(await fetch(s)).blob(),e=window.URL.createObjectURL(l),a=document.createElement("a");a.href=e,a.download=y,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(e)}catch{window.open(s,"_blank")}},D=s=>{s.style.height="0",s.style.opacity="0"},d=s=>{s.style.transition="all 350ms cubic-bezier(0.4, 0, 0.2, 1)",s.style.height=s.scrollHeight+"px",s.style.opacity="1"},c=s=>{s.style.height="auto"},Y=s=>{s.style.height=s.scrollHeight+"px"},$=s=>{requestAnimationFrame(()=>{s.style.transition="all 300ms cubic-bezier(0.4, 0, 0.2, 1)",s.style.height="0",s.style.opacity="0"})};return(s,y)=>{const g=F("UButton");return n(),r("div",J,[(n(!0),r(b,null,x(T.tasks,l=>(n(),r("div",{key:l.id,class:"bg-white border border-gray-200 rounded-xl shadow-sm transition-all duration-200 hover:shadow-md overflow-hidden"},[t("div",{onClick:e=>M(l.id),class:"p-4 cursor-pointer flex items-center justify-between gap-4 select-none"},[t("div",G,[t("div",K,[u(p(q),{class:"text-blue-600",size:22})]),t("div",Q,[t("div",W,[t("span",X,h(l.document.in_number),1)]),t("div",ee,[t("span",te,h(l.description),1)])])]),t("div",se,[u(p(N),{class:U(["text-gray-400 transition-transform duration-300",{"rotate-180 text-blue-600":m.value===l.id}]),size:20},null,8,["class"])])],8,Z),u(V,{onBeforeEnter:D,onEnter:d,onAfterEnter:c,onBeforeLeave:Y,onLeave:$},{default:k(()=>[m.value===l.id?(n(),r("div",ae,[t("div",oe,[t("div",ne,[t("div",null,[t("p",re,h(l.document.summary||"Ma'lumot kiritilmagan"),1)])]),t("div",le,[l.document.attachments.length?(n(),r("div",ie,[t("div",de,[(n(!0),r(b,null,x(l.document.attachments,e=>(n(),S(g,{key:e.id,onClick:a=>v(e.file,`Hujjat_${e.id}.pdf`),class:"group w-full justify-between flex items-center p-2.5 bg-white border border-gray-200 rounded-full hover:border-blue-200 hover:bg-blue-50/30 transition-all text-left"},{default:k(()=>[t("div",ce,[t("div",ue,[u(p(P),{"stroke-width":"2.5",size:16})]),y[0]||(y[0]=t("span",{class:"text-xs font-medium text-gray-700 truncate"},"Fayl",-1))])]),_:1},8,["onClick"]))),128))])])):C("",!0)])])])):C("",!0)]),_:2},1024)]))),128))])}}},me=j(he,[["__scopeId","data-v-48314436"]]),ve={class:"w-full p-4 bg-white overflow-y-scroll h-screen"},_e={class:"flex justify-between items-center mb-4"},ye={class:"text-xl font-bold text-gray-800 dark:text-gray-100"},pe={class:"flex items-center justify-between gap-4"},ge={class:"grid grid-cols-7 py-2 text-center font-semibold text-gray-600 dark:text-gray-300"},fe={class:"grid grid-cols-7 divide-y divide-x"},be=["onClick"],xe={class:"text-md font-medium text-gray-500 text-end"},we={key:0,class:"absolute bottom-2 left-2 flex gap-1"},ke={key:0,class:"text-xs text-gray-500"},Ce={__name:"CalendarViews",setup(T){const m=O(),M=z();A(()=>m.fetchAll());const v=L(()=>{const e={};return m.tasks.forEach(a=>{a.due_date&&(e[a.due_date]||(e[a.due_date]=[]),e[a.due_date].push(a))}),e});function D(e){const a=v.value[e];!a||!a.length||M.openDrawer(me,{tasks:a},{title:"Topshiriqlar",side:"right"})}const d=B(_().month()),c=B(_().year()),Y=["Dushanba","Seshanab","Chorshanba","Payshanba","Juma","Shanba","Yakshanba"],$=["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"],s=L(()=>{const e=_().year(c.value).month(d.value).date(1),a=e.endOf("month"),f=e.day(),o=[];for(let i=0;i<f;i++){const w=e.subtract(f-i,"day");o.push({date:w.format("YYYY-MM-DD"),dayNumber:w.date(),isCurrentMonth:!1})}for(let i=1;i<=a.date();i++){const w=_().year(c.value).month(d.value).date(i);o.push({date:w.format("YYYY-MM-DD"),dayNumber:i,isCurrentMonth:!0})}return o});function y(){const e=_().year(c.value).month(d.value).date(1).subtract(1,"month");d.value=e.month(),c.value=e.year()}function g(){const e=_().year(c.value).month(d.value).date(1).add(1,"month");d.value=e.month(),c.value=e.year()}function l(e){return _().format("YYYY-MM-DD")===e}return(e,a)=>{const f=F("UButton");return n(),r("div",ve,[t("div",_e,[t("h2",ye,h($[d.value])+" "+h(c.value),1),t("div",pe,[u(f,{onClick:y,variant:"hover"},{default:k(()=>[u(p(R),{class:"text-gray-500"})]),_:1}),u(p(I),{class:"text-gray-500"}),u(f,{onClick:g,variant:"hover"},{default:k(()=>[u(p(H),{class:"text-gray-500"})]),_:1})])]),t("div",ge,[(n(),r(b,null,x(Y,o=>t("div",{key:o},h(o),1)),64))]),t("div",fe,[(n(!0),r(b,null,x(s.value,o=>(n(),r("div",{key:o.date,class:U(["h-32 p-2 cursor-pointer hover:bg-gray-100 relative",{"bg-blue-100 dark:bg-blue-900":l(o.date),"bg-gray-100 dark:bg-gray-700":!o.isCurrentMonth}]),onClick:i=>D(o.date)},[t("div",xe,h(o.dayNumber),1),v.value[o.date]?(n(),r("div",we,[(n(!0),r(b,null,x(v.value[o.date].slice(0,3),i=>(n(),r("span",{key:i.id,class:"w-2 h-2 rounded-full bg-blue-400"}))),128)),v.value[o.date].length>3?(n(),r("span",ke," +"+h(v.value[o.date].length-3),1)):C("",!0)])):C("",!0)],10,be))),128))]),a[0]||(a[0]=t("div",{class:"w-full h-44"},null,-1))])}}},Te=j(Ce,[["__scopeId","data-v-54359931"]]);export{Te as default};
