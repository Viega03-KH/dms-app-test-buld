import{x as k,u as B,r as b,a as m,o as f,b as e,g as s,v as g,h as l,f as o,X as $,j as x,w as F,l as U,F as N,B as V}from"./index-5YwSdCnv.js";import{u as S}from"./subjectStore-BhXUWEqg.js";import{B as T}from"./BaseCrudTable-CjDNjMgw.js";import{u as z,S as D}from"./useFormValidate-CYKOA1hY.js";import{_ as A}from"./BaseTableHeader-CGL6DNdt.js";import{T as E}from"./trash-2-BBDNetmq.js";/* empty css                                                                      */import"./plus-Dprf8d8-.js";const X={class:"flex flex-col w-[700px]"},Y={class:"flex justify-between modal-border items-center p-[14px] border-b"},I={class:"text-dark text-lg font-bold uppercase"},L={class:"flex flex-wrap -mx-2 p-4"},O={class:"w-full px-2 py-2"},P={class:"justify-end border-t modal-card modal-border flex items-center p-4"},C={__name:"SubjectsForm",props:{id:{type:Number,default:null}},setup(h){const i=S(),n=k(),u=B(),{form:a,errors:p,validate:d,resetForm:t}=z({title:""},{title:{required:!0,message:"Majburiy"}}),c=h,r=!!c.id,v=async()=>{if(d())try{r?(await i.update(c.id,a),u.show("Muvaffaqiyatli yangilandi","success")):(await i.create(a),u.show("Muvaffaqiyatli yaratildi","success")),w(),t()}catch{u.show("Xatolik yuz berdi","")}},w=()=>n.close();return(j,_)=>{const y=b("UButton"),M=b("UInput");return f(),m("div",X,[e("div",Y,[e("p",I,g(r?"Yangilash":"Yangi"),1),s(y,{customClass:"bg-[#475467] rounded-full p-1",onClick:w},{default:l(()=>[s(o($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e("form",{onSubmit:F(v,["prevent"]),class:"space-y-6"},[e("div",L,[e("div",O,[s(M,{modelValue:o(a).title,"onUpdate:modelValue":_[0]||(_[0]=q=>o(a).title=q),label:"Masala",placeholder:"Masala kiriting",error:o(p).title},null,8,["modelValue","error"])])]),e("div",P,[s(y,{type:"button",onClick:w,variant:"ghost",disabled:o(i).loading},{default:l(()=>[..._[1]||(_[1]=[x(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(y,{type:"submit",variant:"primary",loading:o(i).loading},{default:l(()=>[x(g(r?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},Q={class:"max-w-xl max-h-xl"},G={class:"justify-between border-b modal-card flex items-center p-4"},H={class:"justify-end border-t modal-card flex gap-2 p-4"},J={__name:"SubjectsDelete",props:{id:{type:Number,required:!0}},setup(h){const i=h,n=S(),u=B(),a=k(),p=async()=>{try{await n.remove(i.id),u.show("Muvaffaqiyatli o‘chirildi!","success"),a.close()}catch(d){u.show("Xatolik yuz berdi!","error"),console.error(d)}};return(d,t)=>{const c=b("UButton");return f(),m("div",Q,[e("div",G,[t[2]||(t[2]=e("p",{class:"text-dark text-lg font-semibold"},"O‘chirish",-1)),s(c,{customClass:"bg-[#475467] rounded-full p-1",onClick:t[0]||(t[0]=r=>o(a).close())},{default:l(()=>[s(o($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t[5]||(t[5]=e("div",{class:"p-4 text-center space-y-4"},[e("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),e("div",H,[s(c,{onClick:t[1]||(t[1]=r=>o(a).close()),disabled:o(n).loading},{default:l(()=>[...t[3]||(t[3]=[x(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(c,{variant:"danger",onClick:p,loading:o(n).loading},{default:l(()=>[...t[4]||(t[4]=[x(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},K={class:"flex flex-col gap-4 items-center"},R={class:"table-header"},W={class:"px-4 py-3 flex"},it={__name:"SubjectsList",setup(h){const i=S(),n=k(),u=()=>n.open(C),a=d=>n.open(C,{id:d}),p=d=>n.open(J,{id:d});return U(()=>{i.fetchAll()}),(d,t)=>{const c=b("UButton");return f(),m("div",K,[s(A,{title:"Masala turi",buttonText:"Qo‘shish",onAddNew:u}),s(T,null,{thead:l(()=>[...t[0]||(t[0]=[e("th",{class:"table-header uppercase"},"Nomi",-1),e("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:l(()=>[(f(!0),m(N,null,V(o(i).subjects,r=>(f(),m("tr",{key:r.id,class:"hover:bg-[#F4F6FC] divide-x"},[e("td",R,g(r.title),1),e("td",W,[s(c,{variant:"hover",onClick:v=>a(r.id)},{default:l(()=>[s(o(D),{class:"w-5 h-5"})]),_:1},8,["onClick"]),s(c,{variant:"hover",onClick:v=>p(r.id)},{default:l(()=>[s(o(E),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{it as default};
