import{a as c,o as i,b as e,v as r,f as o,L as _,n as Y,q as h,g as l,j as q,J as p,K as k,c as w,x as P,d as U,N as I,l as N,t as z,h as v,r as g,s as H}from"./index-C_K37xRx.js";import{_ as f,a as L,S as $}from"./UFileCard-BpX_92pW.js";import{_ as O}from"./UPagination-HO_MprsD.js";import{_ as A}from"./TaskForm-zEzLRw-U.js";import{u as E}from"./taskStore-CeK3DC7n.js";import{S as J}from"./square-pen-CdGZNWcY.js";import{T as K}from"./trash-2-DmzZRlEO.js";import"./chevron-left-gwF59zbH.js";import"./chevron-right-CzYd6Vsm.js";import"./usersStore-C95FDL8S.js";import"./subjectStore-CROQczHv.js";import"./useFormValidate-BOioRNXX.js";const Q={class:"flex flex-row"},R={class:"flex-1 min-w-0"},G={class:"flex flex-row items-center justify-between pb-2"},W={class:"text-sm font-extrabold text-black"},X={class:"text-sm font-medium text-[#697696]"},Z={class:"flex flex-col gap-y-2"},ee={class:"flex flex-row items-center justify-between"},te={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},se={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},ae={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},le={class:"inline-block card-dark border text-[14px] font-semibold text-black rounded-[10px] px-3 py-2 w-fit"},oe="task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",ne={__name:"TaskListItem",props:{task:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(t){return(s,d)=>(i(),c("div",{onClick:d[0]||(d[0]=n=>s.$emit("select",t.task)),class:Y([oe,t.active?"bg-[#4076FF0D]":""])},[e("div",Q,[e("div",R,[e("div",G,[e("h4",W,r(t.task.document.in_number),1),e("h4",X,r(o(_)(t.task.doc_data).format("DD MMMM YYYY")),1)]),e("div",Z,[e("div",ee,[e("span",te,r(t.task.subject.title),1)]),e("span",se,r(t.task.document.summary),1),e("span",ae," Bajarish mudati: "+r(o(_)(t.task.due_date).format("DD MMMM YYYY")),1),e("div",le,r(t.task.assignees[0].father_name[0])+"."+r(t.task.assignees[0].first_name[0])+"."+r(t.task.assignees[0].last_name),1)])])])],2))}},ie={key:0},de={class:"grid grid-cols-2 gap-4 pb-4 p-[24px]"},re={class:"w-full flex flex-col border-t border-gray-100 bg-white shadow-sm rounded-lg mt-4"},ce={class:"flex items-center justify-between px-6 py-3 border-b border-gray-50"},ue={class:"font-bold text-gray-800 text-base flex items-center gap-2"},me={class:"ml-1 text-xs bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full"},fe={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},xe={class:"relative shrink-0"},be={class:"flex items-center justify-center w-11 h-11 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 text-white font-semibold text-sm shadow-md transition-transform"},ve={class:"flex flex-col min-w-0"},pe={class:"text-gray-900 font-semibold text-[15px] leading-snug truncate group-hover:text-blue-700 transition-colors"},he={class:"flex items-center gap-1.5 mt-0.5"},ge={class:"text-gray-500 text-xs truncate"},_e={key:1,class:"p-[24px]"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},we={key:0},ye={class:"grid grid-cols-2 gap-2"},$e={__name:"TaskShowItem",props:{task:{type:Object,default:null}},setup(t){return(s,d)=>(i(),c(p,null,[t.task?(i(),c("div",ie,[e("div",de,[l(f,{label:"Bajarish muddati",value:o(_)(t.task.due_date).format("DD MMMM YYYY")},null,8,["value"]),l(f,{label:"Topshiriq",value:t.task.subject.title},null,8,["value"]),l(f,{label:"Topshiriq mazmun",value:t.task.description,class:"col-span-2"},null,8,["value"])]),e("div",re,[e("div",ce,[e("h3",ue,[d[0]||(d[0]=e("span",{class:"w-1.5 h-5 bg-blue-600 rounded-full"},null,-1)),d[1]||(d[1]=q(" Ijrochilar ",-1)),e("span",me,r(t.task.assignees?.length||0),1)])]),e("div",fe,[(i(!0),c(p,null,k(t.task.assignees,n=>(i(),c("div",{key:n.id,class:"group flex items-center gap-4 px-6 py-3 transition-all duration-200 hover:bg-blue-50/50 border-b border-gray-50 last:border-none cursor-pointer"},[e("div",xe,[e("div",be,r(n.first_name?n.first_name[0]:"?"),1)]),e("div",ve,[e("span",pe,r(n.last_name)+" "+r(n.first_name),1),e("div",he,[e("span",ge,r(n.department_name),1)])])]))),128))])]),d[2]||(d[2]=e("div",{class:"bg-[#F4F6FC] w-full h-14"},null,-1))])):h("",!0),t.task.document?(i(),c("div",_e,[e("div",ke,[l(f,{label:"Kelib tushgan raqam",value:t.task.document.in_number},null,8,["value"]),l(f,{label:"Chiqish raqami",value:t.task.document.out_number},null,8,["value"]),l(f,{label:"Hujjat nomi",value:t.task.document.title,class:"md:col-span-2"},null,8,["value"]),l(f,{label:"Hujjat nomi",value:t.task.document.summary,class:"md:col-span-2"},null,8,["value"]),l(f,{label:"Hujjatni Imzololovchi",value:t.task.document.signer},null,8,["value"]),l(f,{label:"Jurnal",value:t.task.document.journal.name},null,8,["value"])]),t.task.document.attachments?.length?(i(),c("div",we,[d[3]||(d[3]=e("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),e("div",ye,[(i(!0),c(p,null,k(t.task.document.attachments,n=>(i(),w(L,{key:n.id,file:n},null,8,["file"]))),128))])])):h("",!0)])):h("",!0)],64))}},je={class:"mx-auto"},Fe={class:"grid grid-cols-1 lg:grid-cols-12"},Te={class:"col-span-12 md:col-span-5 2xl:col-span-3"},De={class:"card-dark border-b-2 border-x shadow-sm"},Me={class:"flex px-1 py-3 items-center border-b card-border justify-between"},Se={class:"flex items-center"},Ce={class:"flex gap-1"},Ve={class:"h-[calc(100vh-8rem)] overflow-y-auto"},Be={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-3 h-[calc(100vh-4rem)] overflow-y-auto"},Ye={class:"card-dark rounded-b border-b border-x"},qe={key:0},Pe={class:"flex px-1 py-2 items-center border-b card-border justify-between"},Ue={class:"flex items-center gap-2"},Ie={key:1,class:"flex flex-col"},Ne={class:"grid grid-cols-3 p-6 gap-4"},ze={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},Ze={__name:"InexecutionViews",setup(t){const s=E(),d=P(),n=U(null),u=I({due_date:"",assignee:"",created_at:""}),j=[{label:"Bajarilgan",name:"done"},{label:"Bajarilmoqda",name:"in_progress"},{label:"Bajarilmadi",name:"be_rejected"}],F=x=>s.setSelectedTask(x),T=x=>s.fetchAll(x),D=()=>{s.selectedTask&&d.open(A,{existingTask:{...s.selectedTask}})},M=()=>s.setSelectedTask(null),S=async()=>{await s.setFilter("status",n.value||""),await s.setFilter("due_date",u.due_date),await s.setFilter("assignee",u.assignee),await s.setFilter("created_at",u.created_at)},C=async()=>{n.value=null,u.due_date="",u.assignee="",u.created_at="",await s.setFilter("status",""),await s.setFilter("due_date",""),await s.setFilter("assignee",""),await s.setFilter("created_at","")};return N(()=>s.fetchAll()),(x,a)=>{const b=g("UButton"),V=g("USelect"),y=g("UDatePicker"),B=H("wave");return i(),c("div",je,[e("div",Fe,[e("div",Te,[e("div",De,[e("div",Me,[e("div",Se,[z((i(),w(b,{onClick:M,variant:"hover"},{default:v(()=>[l(o($),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[B]]),a[3]||(a[3]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"}," Topshiriqlar ",-1))]),e("div",Ce,[l(O,{currentPage:o(s).pagination.currentPage,previous:o(s).pagination.previous,next:o(s).pagination.next,lastPage:Math.ceil(o(s).pagination.count/10),total:o(s).pagination.count,loading:o(s).loading,onChange:T},null,8,["currentPage","previous","next","lastPage","total","loading"])])]),e("div",Ve,[(i(!0),c(p,null,k(o(s).tasks,m=>(i(),w(ne,{key:m.id,task:m,active:o(s).selectedTask?.id===m.id,onSelect:F},null,8,["task","active"]))),128)),a[4]||(a[4]=e("div",{class:"h-24 w-full"},null,-1))])])]),e("div",Be,[e("div",Ye,[o(s).selectedTask?(i(),c("div",qe,[e("div",Pe,[a[6]||(a[6]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Biriktirilgan topshiriq",-1)),e("div",Ue,[l(b,{onClick:D,variant:"primary"},{default:v(()=>[l(o(J),{"stroke-width":"3",class:"text-white w-6 h-4"}),a[5]||(a[5]=e("span",{class:"px-1"},"Tahrirlash",-1))]),_:1})])]),l($e,{task:o(s).selectedTask},null,8,["task"]),a[7]||(a[7]=e("div",{class:"flex p-4 bg-[#F4F6FC]"},null,-1))])):(i(),c("div",Ie,[e("div",null,[a[8]||(a[8]=e("div",{class:"flex p-3 items-center card-border border-b justify-between"},[e("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),e("div",Ne,[l(V,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=m=>n.value=m),options:j,"option-label":"","option-value":"name",placeholder:"Hujjat holati"},null,8,["modelValue"]),l(y,{modelValue:u.due_date,"onUpdate:modelValue":a[1]||(a[1]=m=>u.due_date=m),label:"",placeholder:"Muddati"},null,8,["modelValue"]),l(y,{modelValue:u.created_at,"onUpdate:modelValue":a[2]||(a[2]=m=>u.created_at=m),label:"",placeholder:"Ro`yxatga olingan sana"},null,8,["modelValue"])])]),e("div",ze,[l(b,{class:"flex items-center",onClick:C},{default:v(()=>[l(o(K),{"stroke-width":"2.5",class:"w-5 h-5"}),a[9]||(a[9]=e("span",{class:"px-2"},"Tozalash",-1))]),_:1}),l(b,{variant:"primary",class:"flex items-center",onClick:S},{default:v(()=>[l(o($),{"stroke-width":"2.5",class:"w-5 h-5"}),a[10]||(a[10]=e("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))]),a[11]||(a[11]=e("div",{class:"w-full h-48"},null,-1))])])])}}};export{Ze as default};
