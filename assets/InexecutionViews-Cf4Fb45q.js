import{a as d,o as i,b as e,v as u,f as o,O as g,n as B,q as f,g as l,j as Y,F as h,C as k,c as w,x as P,d as U,Q as I,l as z,t as N,h as b,r as _,s as O}from"./index-CCDjh50H.js";import{_ as p,S as $}from"./UInfoItem-DR3coP1g.js";import{_ as A}from"./UFileCard-BpT-hOtE.js";import{_ as H}from"./UPagination-DHY0kFLz.js";import{_ as Q}from"./TaskForm-DmkV3Tr1.js";import{u as E}from"./taskStore-6dywxdbk.js";import{S as L}from"./useFormValidate-PzpJs8mc.js";import{T as J}from"./trash-2-BREhF32t.js";import"./chevron-left-BlZX--ht.js";import"./chevron-right-WHC7EkOp.js";import"./usersStore-BJgSVqfi.js";import"./subjectStore-DPng6cT9.js";import"./MultiColumnUserSelect-DAuuT935.js";const K={class:"flex flex-row"},G={class:"flex-1 min-w-0"},R={class:"flex flex-row items-center justify-between pb-2"},W={class:"text-sm font-extrabold text-black"},X={class:"text-sm font-medium text-[#697696]"},Z={class:"flex flex-col gap-y-2"},ee={class:"flex flex-row items-center justify-between"},te={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},se={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},ae={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},le="task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",oe={__name:"TaskListItem",props:{task:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(s){return(t,r)=>(i(),d("div",{onClick:r[0]||(r[0]=n=>t.$emit("select",s.task)),class:B([le,s.active?"bg-[#4076FF0D]":""])},[e("div",K,[e("div",G,[e("div",R,[e("h4",W,u(s.task.document.in_number),1),e("h4",X,u(o(g)(s.task.doc_data).format("DD MMMM YYYY")),1)]),e("div",Z,[e("div",ee,[e("span",te,u(s.task.document.out_number),1)]),e("span",se,u(s.task.document.summary),1),e("span",ae," Bajarish mudati: "+u(o(g)(s.task.due_date).format("DD MMMM YYYY")),1)])])])],2))}},ie={key:0},ne={class:"grid grid-cols-2 gap-4 pb-4 p-[24px]"},de={class:"w-full flex flex-col border-t border-gray-100 bg-white shadow-sm rounded-lg mt-4"},re={class:"flex items-center justify-between px-6 py-3 border-b border-gray-50"},ce={class:"font-bold text-gray-800 text-base flex items-center gap-2"},ue={class:"ml-1 text-xs bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full"},me={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},pe={class:"relative shrink-0"},fe={class:"flex items-center justify-center w-11 h-11 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 text-white font-semibold text-sm shadow-md"},xe={key:0,class:"absolute -top-1 -right-1 bg-yellow-400 text-white p-0.5 rounded-full w-2 h-2 border-white shadow-sm",title:"Asosiy ijrochi"},ve={class:"flex flex-col min-w-0"},be={class:"flex items-center gap-2"},he={class:"text-gray-900 font-semibold text-[15px] truncate group-hover:text-blue-700 transition-colors"},_e={key:0,class:"text-[10px] bg-yellow-100 text-yellow-700 px-1.5 py-0.5 rounded font-bold"},ge={class:"text-gray-500 text-xs truncate"},ke={key:1,class:"p-[24px]"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},ye={key:0},$e={class:"grid grid-cols-2 gap-2"},je={__name:"TaskShowItem",props:{task:{type:Object,default:null}},setup(s){return(t,r)=>(i(),d(h,null,[s.task?(i(),d("div",ie,[e("div",ne,[l(p,{label:"Bajarish muddati",value:o(g)(s.task.due_date).format("DD MMMM YYYY")},null,8,["value"]),l(p,{label:"Topshiriq",value:s.task.subject.title},null,8,["value"]),l(p,{label:"Topshiriq mazmun",value:s.task.description,class:"col-span-2"},null,8,["value"])]),e("div",de,[e("div",re,[e("h3",ce,[r[0]||(r[0]=e("span",{class:"w-1.5 h-5 bg-blue-600 rounded-full"},null,-1)),r[1]||(r[1]=Y(" Ijrochilar ",-1)),e("span",ue,u(s.task.assignees?.length||0),1)])]),e("div",me,[(i(!0),d(h,null,k(s.task.assignees,(n,c)=>(i(),d("div",{key:n.id,class:"group flex items-center gap-4 px-6 py-3 transition-all hover:bg-blue-50/50 cursor-pointer"},[e("div",pe,[e("div",fe,u(n.first_name?.[0]||"?"),1),c===0?(i(),d("div",xe)):f("",!0)]),e("div",ve,[e("div",be,[e("span",he,u(n.last_name)+" "+u(n.first_name),1),c===0?(i(),d("span",_e," Mas'ul ")):f("",!0)]),e("span",ge,u(n.department_name),1)])]))),128))])]),r[2]||(r[2]=e("div",{class:"bg-[#F4F6FC] w-full h-14"},null,-1))])):f("",!0),s.task.document?(i(),d("div",ke,[e("div",we,[l(p,{label:"Kelib tushgan raqam",value:s.task.document.in_number},null,8,["value"]),l(p,{label:"Chiqish raqami",value:s.task.document.out_number},null,8,["value"]),l(p,{label:"Hujjat nomi",value:s.task.document.title,class:"md:col-span-2"},null,8,["value"]),l(p,{label:"Hujjat nomi",value:s.task.document.summary,class:"md:col-span-2"},null,8,["value"]),l(p,{label:"Hujjatni Imzololovchi",value:s.task.document.signer},null,8,["value"]),l(p,{label:"Jurnal",value:s.task.document.journal.name},null,8,["value"])]),s.task.document.attachments?.length?(i(),d("div",ye,[r[3]||(r[3]=e("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),e("div",$e,[(i(!0),d(h,null,k(s.task.document.attachments,n=>(i(),w(A,{key:n.id,file:n},null,8,["file"]))),128))])])):f("",!0)])):f("",!0)],64))}},Fe={class:"mx-auto"},Te={class:"grid grid-cols-1 lg:grid-cols-12"},Ce={class:"col-span-12 md:col-span-5 2xl:col-span-3"},De={class:"card-dark border-b-2 border-x shadow-sm"},Me={class:"flex px-1 py-3 items-center border-b card-border justify-between"},Se={class:"flex items-center"},qe={class:"flex gap-1"},Ve={class:"h-[calc(100vh-8rem)] overflow-y-auto"},Be={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-3 h-[calc(100vh-4rem)] overflow-y-auto"},Ye={class:"card-dark rounded-b border-b border-x"},Pe={key:0},Ue={class:"flex px-1 py-2 items-center border-b card-border justify-between"},Ie={class:"flex items-center gap-2"},ze={key:1,class:"flex flex-col"},Ne={class:"grid grid-cols-3 p-6 gap-4"},Oe={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},tt={__name:"InexecutionViews",setup(s){const t=E(),r=P(),n=U(null),c=I({due_date:"",assignee:"",created_at:""}),j=[{label:"Bajarilgan",name:"done"},{label:"Tasdiqlshda",name:"in_confirmation"},{label:"Bajarilmoqda",name:"in_progress"},{label:"Bajarilmadi",name:"be_rejected"}],F=x=>t.setSelectedTask(x),T=x=>t.fetchAll(x),C=()=>{t.selectedTask&&r.open(Q,{existingTask:{...t.selectedTask}})},D=()=>t.setSelectedTask(null),M=async()=>{await t.setFilter("status",n.value||""),await t.setFilter("due_date",c.due_date),await t.setFilter("assignee",c.assignee),await t.setFilter("created_at",c.created_at)},S=async()=>{n.value=null,c.due_date="",c.assignee="",c.created_at="",await t.setFilter("status",""),await t.setFilter("due_date",""),await t.setFilter("assignee",""),await t.setFilter("created_at","")};return z(()=>t.fetchAll()),(x,a)=>{const v=_("UButton"),q=_("USelect"),y=_("UDatePicker"),V=O("wave");return i(),d("div",Fe,[e("div",Te,[e("div",Ce,[e("div",De,[e("div",Me,[e("div",Se,[N((i(),w(v,{onClick:D,variant:"hover"},{default:b(()=>[l(o($),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[V]]),a[3]||(a[3]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"}," Topshiriqlar ",-1))]),e("div",qe,[l(H,{currentPage:o(t).pagination.currentPage,previous:o(t).pagination.previous,next:o(t).pagination.next,lastPage:Math.ceil(o(t).pagination.count/10),total:o(t).pagination.count,loading:o(t).loading,onChange:T},null,8,["currentPage","previous","next","lastPage","total","loading"])])]),e("div",Ve,[(i(!0),d(h,null,k(o(t).tasks,m=>(i(),w(oe,{key:m.id,task:m,active:o(t).selectedTask?.id===m.id,onSelect:F},null,8,["task","active"]))),128)),a[4]||(a[4]=e("div",{class:"h-24 w-full"},null,-1))])])]),e("div",Be,[e("div",Ye,[o(t).selectedTask?(i(),d("div",Pe,[e("div",Ue,[a[6]||(a[6]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Biriktirilgan topshiriq",-1)),e("div",Ie,[l(v,{onClick:C,variant:"primary"},{default:b(()=>[l(o(L),{"stroke-width":"3",class:"text-white w-6 h-4"}),a[5]||(a[5]=e("span",{class:"px-1"},"Tahrirlash",-1))]),_:1})])]),l(je,{task:o(t).selectedTask},null,8,["task"]),a[7]||(a[7]=e("div",{class:"flex p-4 bg-[#F4F6FC]"},null,-1))])):(i(),d("div",ze,[e("div",null,[a[8]||(a[8]=e("div",{class:"flex p-3 items-center card-border border-b justify-between"},[e("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),e("div",Ne,[l(q,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=m=>n.value=m),options:j,"option-label":"","option-value":"name",placeholder:"Topshiriq holati"},null,8,["modelValue"]),l(y,{modelValue:c.due_date,"onUpdate:modelValue":a[1]||(a[1]=m=>c.due_date=m),label:"",placeholder:"Topshiriq muddati"},null,8,["modelValue"]),l(y,{modelValue:c.created_at,"onUpdate:modelValue":a[2]||(a[2]=m=>c.created_at=m),label:"",placeholder:"Topshiriq yaratilgan sana"},null,8,["modelValue"])])]),e("div",Oe,[l(v,{class:"flex items-center",onClick:S},{default:b(()=>[l(o(J),{"stroke-width":"2.5",class:"w-5 h-5"}),a[9]||(a[9]=e("span",{class:"px-2"},"Tozalash",-1))]),_:1}),l(v,{variant:"primary",class:"flex items-center",onClick:M},{default:b(()=>[l(o($),{"stroke-width":"2.5",class:"w-5 h-5"}),a[10]||(a[10]=e("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))]),a[11]||(a[11]=e("div",{class:"w-full h-48"},null,-1))])])])}}};export{tt as default};
