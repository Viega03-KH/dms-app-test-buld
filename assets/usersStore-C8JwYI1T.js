import{O as t,y as a}from"./index-CLFv_Ssa.js";const i=(s=1)=>{const e=Number(s)||1;return t.get(`/users?page=${e}`)},n=()=>t.get("/all"),o=s=>t.post("/users/",s),l=s=>t.get(`/users/${s}/`),c=(s,e)=>t.put(`/users/${s}/`,e),u=s=>t.delete(`/users/${s}/`),d=a("users",{state:()=>({users:[],pagination:{previous:1,next:1,count:0},selectedUser:null,loading:!1,error:null}),actions:{async fetchUsersNotPage(){this.loading=!0,this.error=null;try{const s=await n();this.users=s.data.data}catch(s){this.error=s,console.error("User olishda xato:",s)}finally{this.loading=!1}},async fetchUsers(s=null){this.loading=!0,this.error=null;try{const e=s||this.pagination.previous,r=await i(e);this.users=r.data.results,this.pagination.previous=r.data.previous,this.pagination.next=r.data.next,this.pagination.count=r.data.count}catch(e){this.error=e.message}finally{this.loading=!1}},async fetchUser(s){this.loading=!0;try{const e=await l(s);return this.selectedUser=e.data,e.data}catch(e){this.error=e.message}finally{this.loading=!1}},async addUser(s){this.loading=!0;try{return await o(s),await this.fetchUsers(),{success:!0}}catch(e){return this.error=e.message,{success:!1,error:e.message}}finally{this.loading=!1}},async editUser(s,e){this.loading=!0,this.error=null;try{const r=await c(s,e);return await this.fetchUsers(),{success:!0,data:r.data}}catch(r){return this.error=r.message,{success:!1,error:this.error}}finally{this.loading=!1}},async removeUser(s){this.loading=!0;try{await u(s),await this.fetchUsers()}catch(e){this.error=e.message}finally{this.loading=!1}}}});export{d as u};
