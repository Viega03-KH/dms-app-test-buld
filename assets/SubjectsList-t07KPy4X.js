import{x as k,u as B,r as b,a as m,o as f,b as e,g as s,v as g,h as a,f as o,j as _,w as F,l as U,F as V,C as N}from"./index-BtXiaCr0.js";import{u as S}from"./subjectStore-CrR0XgQQ.js";import{I as z}from"./IconBG-CDYabZY5.js";import{B as T}from"./BaseCrudTable-BIuxgXxU.js";import{u as D,X as j,S as I}from"./useFormValidate-Db0qx1D3.js";import{P as A}from"./plus-308K3JGX.js";import{T as E}from"./trash-2-BZ4WWJqv.js";const P={class:"flex flex-col w-[700px]"},X={class:"flex justify-between modal-border items-center p-[14px] border-b"},Y={class:"text-dark text-lg font-bold uppercase"},L={class:"flex flex-wrap -mx-2 p-4"},O={class:"w-full px-2 py-2"},G={class:"justify-end border-t modal-card modal-border flex items-center p-4"},C={__name:"SubjectsForm",props:{id:{type:Number,default:null}},setup(h){const n=S(),d=k(),u=B(),{form:r,errors:p,validate:c,resetForm:t}=D({title:""},{title:{required:!0,message:"Majburiy"}}),l=h,i=!!l.id,v=async()=>{if(c())try{i?(await n.update(l.id,r),u.show("Muvaffaqiyatli yangilandi","success")):(await n.create(r),u.show("Muvaffaqiyatli yaratildi","success")),w(),t()}catch{u.show("Xatolik yuz berdi","")}},w=()=>d.close();return($,x)=>{const y=b("UButton"),M=b("UInput");return f(),m("div",P,[e("div",X,[e("p",Y,g(i?"Yangilash":"Yangi"),1),s(y,{customClass:"bg-[#475467] rounded-full p-1",onClick:w},{default:a(()=>[s(o(j),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e("form",{onSubmit:F(v,["prevent"]),class:"space-y-6"},[e("div",L,[e("div",O,[s(M,{modelValue:o(r).title,"onUpdate:modelValue":x[0]||(x[0]=q=>o(r).title=q),label:"Masala",placeholder:"Masala kiriting",error:o(p).title},null,8,["modelValue","error"])])]),e("div",G,[s(y,{type:"button",onClick:w,variant:"ghost",disabled:o(n).loading},{default:a(()=>[...x[1]||(x[1]=[_(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(y,{type:"submit",variant:"primary",loading:o(n).loading},{default:a(()=>[_(g(i?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},Q={class:"max-w-xl max-h-xl"},H={class:"justify-between border-b modal-card flex items-center p-4"},J={class:"justify-end border-t modal-card flex gap-2 p-4"},K={__name:"SubjectsDelete",props:{id:{type:Number,required:!0}},setup(h){const n=h,d=S(),u=B(),r=k(),p=async()=>{try{await d.remove(n.id),u.show("Muvaffaqiyatli o‘chirildi!","success"),r.close()}catch(c){u.show("Xatolik yuz berdi!","error"),console.error(c)}};return(c,t)=>{const l=b("UButton");return f(),m("div",Q,[e("div",H,[t[2]||(t[2]=e("p",{class:"text-dark text-lg font-semibold"},"O‘chirish",-1)),s(l,{customClass:"bg-[#475467] rounded-full p-1",onClick:t[0]||(t[0]=i=>o(r).close())},{default:a(()=>[s(o(j),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t[5]||(t[5]=e("div",{class:"p-4 text-center space-y-4"},[e("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),e("div",J,[s(l,{onClick:t[1]||(t[1]=i=>o(r).close()),disabled:o(d).loading},{default:a(()=>[...t[3]||(t[3]=[_(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(l,{variant:"danger",onClick:p,loading:o(d).loading},{default:a(()=>[...t[4]||(t[4]=[_(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},R={class:"flex flex-col items-center"},W={class:"relative flex bg-[#0F172A] shadow-sm flex-col gap-5 sm:flex-row sm:items-center sm:justify-between p-6 w-full overflow-hidden"},Z={class:"table-header"},tt={class:"px-4 py-3 flex justify-center gap-2"},nt={__name:"SubjectsList",setup(h){const n=S(),d=k(),u=()=>d.open(C),r=c=>d.open(C,{id:c}),p=c=>d.open(K,{id:c});return U(()=>{n.fetchAll()}),(c,t)=>{const l=b("UButton");return f(),m("div",R,[e("div",W,[s(z),t[1]||(t[1]=e("h3",{class:"text-md font-extrabold uppercase text-gray-100"},"Masala turi",-1)),s(l,{class:"z-10",variant:"primary",onClick:u},{default:a(()=>[s(o(A),{"stroke-width":"3"}),t[0]||(t[0]=e("span",{class:"px-1"},"Qo‘shish",-1))]),_:1})]),s(T,null,{thead:a(()=>[...t[2]||(t[2]=[e("th",{class:"table-header uppercase"},"Nomi",-1),e("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:a(()=>[(f(!0),m(V,null,N(o(n).subjects,i=>(f(),m("tr",{key:i.id,class:"hover:bg-[#F4F6FC]"},[e("td",Z,g(i.title),1),e("td",tt,[s(l,{variant:"hover",onClick:v=>r(i.id)},{default:a(()=>[s(o(I),{class:"w-5 h-5"})]),_:1},8,["onClick"]),s(l,{variant:"hover",onClick:v=>p(i.id)},{default:a(()=>[s(o(E),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{nt as default};
