import{x as k,u as $,r as x,a as m,o as f,b as t,g as s,v as b,h as l,f as o,X as S,j as v,w as F,l as U,F as Y,B as j,O as V}from"./index-5YwSdCnv.js";import{u as B}from"./departmentStore-CslpbvBc.js";import{B as N}from"./BaseCrudTable-CjDNjMgw.js";import{_ as T}from"./BaseTableHeader-CGL6DNdt.js";import{u as z,S as A}from"./useFormValidate-CYKOA1hY.js";import{T as E}from"./trash-2-BBDNetmq.js";/* empty css                                                                      */import"./plus-Dprf8d8-.js";const O={class:"flex flex-col w-[700px]"},X={class:"flex justify-between modal-border items-center p-[14px] border-b"},I={class:"text-black text-md font-bold uppercase"},L={class:"flex flex-wrap -mx-2 p-4"},P={class:"w-full px-2 py-2"},G={class:"justify-end border-t modal-card modal-border flex items-center p-4"},C={__name:"DepartmentForm",props:{id:{type:Number,default:null}},setup(h){const n=B(),i=k(),p=$(),{form:r,errors:u,validate:d,resetForm:e}=z({name:""},{name:{required:!0,message:"Majburiy"}}),c=h,a=!!c.id,y=async()=>{if(d())try{a?(await n.update(c.id,r),p.show("Muvaffaqiyatli yangilandi","success")):(await n.create(r),p.show("Muvaffaqiyatli yaratildi","success")),w(),e()}catch{p.show("Xatolik yuz berdi","")}},w=()=>i.close();return(M,_)=>{const g=x("UButton"),q=x("UInput");return f(),m("div",O,[t("div",X,[t("p",I,b(a?"Yangilash":"Yangi"),1),s(g,{customClass:"bg-[#475467] rounded-full p-1",onClick:w},{default:l(()=>[s(o(S),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t("form",{onSubmit:F(y,["prevent"]),class:"space-y-6"},[t("div",L,[t("div",P,[s(q,{modelValue:o(r).name,"onUpdate:modelValue":_[0]||(_[0]=D=>o(r).name=D),label:"Bo'lim",placeholder:"Bo'lim kiriting",error:o(u).name},null,8,["modelValue","error"])])]),t("div",G,[s(g,{type:"button",variant:"ghost",onClick:w,disabled:o(n).loading},{default:l(()=>[..._[1]||(_[1]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(g,{type:"submit",variant:"primary",loading:o(n).loading},{default:l(()=>[v(b(a?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},H={class:"max-w-xl max-h-xl"},J={class:"flex justify-between modal-border items-center p-[14px] border-b"},K={class:"justify-end border-t modal-card flex gap-2 p-4"},Q={__name:"DepartmentDelete",props:{id:{type:Number,required:!0}},setup(h){const n=h,i=B(),p=$(),r=k(),u=async()=>{try{await i.remove(n.id),p.show("Muvaffaqiyatli o‘chirildi!","success"),r.close()}catch(d){p.show("Xatolik yuz berdi!","error"),console.error(d)}};return(d,e)=>{const c=x("UButton");return f(),m("div",H,[t("div",J,[e[2]||(e[2]=t("p",{class:"text-dark text-lg font-bold uppercase"},"O‘chirish",-1)),s(c,{customClass:"bg-[#475467] rounded-full p-1",onClick:e[0]||(e[0]=a=>o(r).close())},{default:l(()=>[s(o(S),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e[5]||(e[5]=t("div",{class:"p-4 text-center space-y-4"},[t("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),t("div",K,[s(c,{variant:"ghost",onClick:e[1]||(e[1]=a=>o(r).close()),disabled:o(i).loading},{default:l(()=>[...e[3]||(e[3]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(c,{variant:"danger",onClick:u,loading:o(i).loading},{default:l(()=>[...e[4]||(e[4]=[v(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},R={class:"flex flex-col gap-4 items-center h-screen overflow-y-auto px-2"},W={class:"p-6 w-full"},Z={class:"px-4 py-3 border-r"},ee={class:"px-4 py-3 border-r"},te={class:"px-4 py-3 flex"},ce={__name:"DepartmentList",setup(h){const n=B(),i=k(),p=()=>i.open(C),r=d=>i.open(C,{id:d}),u=d=>i.open(Q,{id:d});return U(()=>n.fetchAll()),(d,e)=>{const c=x("UButton");return f(),m("div",R,[s(T,{title:"Bo'limlar",buttonText:"Bo'lim qo‘shish",onAddNew:p}),t("div",W,[s(N,null,{thead:l(()=>[...e[0]||(e[0]=[t("th",{class:"table-header uppercase"},"Bo'lim",-1),t("th",{class:"table-header uppercase"},"Yaratilgan",-1),t("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:l(()=>[(f(!0),m(Y,null,j(o(n).departments,a=>(f(),m("tr",{key:a.id,class:"hover:bg-[#F4F6FC]"},[t("td",Z,b(a.name),1),t("td",ee,b(o(V)(a.created_at).format("DD MMMM YYYY")),1),t("td",te,[s(c,{variant:"hover",onClick:y=>r(a.id)},{default:l(()=>[s(o(A),{class:"w-5 h-5"})]),_:1},8,["onClick"]),s(c,{variant:"hover",onClick:y=>u(a.id)},{default:l(()=>[s(o(E),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})]),e[1]||(e[1]=t("div",{class:"w-full h-44"},null,-1))])}}};export{ce as default};
