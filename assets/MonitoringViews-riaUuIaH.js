import{k as m,_ as z,d as V,l as A,a as r,b as e,J as p,K as u,g as c,f as l,r as y,h as v,q as b,j as _,v as o,o as d,n as w,L as j,w as H}from"./index-C_K37xRx.js";import{u as T}from"./taskStore-CeK3DC7n.js";import{_ as $}from"./UPagination-HO_MprsD.js";import{T as F}from"./trash-2-DmzZRlEO.js";import{F as L}from"./file-text-CEkKDsyB.js";import{D as R}from"./download-DQ5J_2FA.js";import"./chevron-left-gwF59zbH.js";import"./chevron-right-CzYd6Vsm.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=m("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=m("file-question-mark",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=m("paperclip",[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=m("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]),Q={class:"overflow-y-scroll h-screen bg-slate-50/30 custom-scrollbar"},W={class:"w-full max-w-[1400px] mx-auto px-4 py-6 flex flex-col gap-6 flex-grow"},K={class:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col lg:flex-row items-center justify-between gap-4 shrink-0"},O={class:"flex items-center gap-1 bg-slate-100 p-1.5 rounded-xl w-full lg:w-auto overflow-x-auto no-scrollbar"},X={class:"ml-1.5 px-1.5 py-0.5 rounded-full bg-slate-200 text-slate-600 text-[10px] font-bold"},Z={class:"flex items-center gap-3 w-full lg:w-auto"},ee={class:"bg-white rounded-2xl shadow-sm border border-slate-200 flex flex-col overflow-hidden"},te={class:"overflow-x-auto"},se={class:"w-full border-collapse"},ae={key:0},le=["onClick"],oe={class:"px-4 py-5 text-center text-[13px] text-slate-500 font-semibold"},ne={class:"px-4 py-5"},re={class:"flex flex-col gap-1"},de={class:"flex items-center gap-2"},ie={class:"px-2 py-0.5 rounded bg-slate-100 text-[10px] font-bold text-slate-600"},ce={class:"text-sm font-black text-slate-800 tracking-tight"},pe={class:"text-xs text-slate-500 line-clamp-1 leading-relaxed"},ue={class:"px-4 py-5 text-center"},xe={class:"text-[11px] font-black px-2.5 py-1 rounded-lg bg-orange-100/50 text-orange-700 border border-orange-200"},be={class:"px-4 py-5"},he={class:"flex items-center gap-2"},ge={class:"w-7 h-7 rounded-full bg-blue-100 flex items-center justify-center text-[10px] font-bold text-blue-600 ring-2 ring-white"},fe={class:"text-xs font-bold text-slate-700"},_e={class:"inline-flex items-center bg-slate-100/80 p-1 rounded-xl border border-slate-200"},me=["onClick"],ke={key:0},ye={colspan:"5",class:"px-8 py-6 bg-slate-50/50 border-b border-slate-200"},ve={class:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-in fade-in slide-in-from-top-2 duration-500"},we={class:"space-y-5"},je={class:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm"},Me={class:"text-[13px] font-bold text-slate-800 leading-relaxed mb-3"},Ce={class:"text-xs text-slate-500 italic leading-relaxed"},Be={key:0,class:"space-y-2"},Ve=["href"],Ye={class:"flex items-center gap-3"},De={class:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-2xl shadow-lg shadow-blue-500/10 text-white relative overflow-hidden"},qe={class:"text-[15px] font-bold leading-relaxed mb-6 relative z-10"},Se={class:"pt-4 border-t border-white/20 text-[11px] font-medium text-blue-100 flex items-center gap-2"},Ie={class:"space-y-4"},Pe={key:0,class:"space-y-4 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar"},Ue={class:"flex items-center justify-between mb-3"},ze={class:"text-[11px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-lg"},Ae={class:"text-[9px] text-slate-400"},He={class:"text-xs text-slate-600 font-medium mb-4 leading-relaxed"},Te={key:0,class:"flex flex-col gap-2 pt-3 border-t border-slate-50"},$e=["href"],Fe={class:"text-[10px] font-bold text-slate-700 group-hover/file:text-blue-700"},Le={key:1,class:"h-40 flex flex-col items-center justify-center bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200"},Re={key:0,class:"py-32 flex flex-col items-center justify-center gap-4"},Ee={class:"px-8 py-5 bg-slate-50/80 flex items-center justify-between border-t border-slate-200"},Je={class:"text-[11px] text-slate-400 font-bold uppercase tracking-tighter"},Ne={class:"text-slate-800"},Ge={__name:"MonitoringViews",setup(Qe){const a=T(),k=V("all"),x=V(null),M=n=>n?n.startsWith("http")?n:`http://127.0.0.1:8000${n.startsWith("/")?"":"/"}${n}`:"#",Y=[{id:"in_progress",name:"Jarayonda",color:"bg-blue-500"},{id:"done",name:"Bajarildi",color:"bg-green-500"},{id:"be_rejected",name:"Rad etildi",color:"bg-red-500"}],C=[{key:"all",label:"Barchasi",status:""},{key:"done",label:"Bajarilgan",status:"done"},{key:"in_progress",label:"Jarayonda",status:"in_progress"},{key:"be_rejected",label:"Rad etilgan",status:"be_rejected"}];C.forEach(n=>{n.count=()=>n.key==="all"?a.pagination.count||0:a[n.key]||0});const D=n=>x.value=x.value===n?null:n,h=async()=>{x.value=null,await a.fetchAll(1)},q=async(n,s)=>{(await a.updateTaskStatus(n,s)).success&&await a.fetchAll(a.pagination.currentPage)},S=async n=>{k.value=n.key,a.filters.status=n.status,await h()},I=async()=>{k.value="all",a.filters.due_date=null,a.filters.status="",await h()};return A(()=>a.fetchAll()),(n,s)=>{const g=y("UButton"),P=y("UDatePicker"),U=y("IconBG");return d(),r("div",Q,[e("main",W,[e("section",K,[e("div",O,[(d(),r(p,null,u(C,t=>c(g,{key:t.key,onClick:i=>S(t),class:w(["flex-1 lg:flex-none px-5 py-2.5 rounded-lg text-[11px] font-extrabold uppercase transition-all whitespace-nowrap tracking-wider shadow-none border-none",k.value===t.key?"bg-white shadow-md text-blue-600 ring-1 ring-slate-200":"text-slate-500 hover:text-slate-800 bg-transparent"])},{default:v(()=>[_(o(t.label)+" ",1),e("span",X,o(t.count()),1)]),_:2},1032,["onClick","class"])),64))]),e("div",Z,[c(P,{modelValue:l(a).filters.due_date,"onUpdate:modelValue":[s[0]||(s[0]=t=>l(a).filters.due_date=t),h],placeholder:"Muddati",class:"flex-1 lg:w-52"},null,8,["modelValue"]),c(g,{variant:"primary",onClick:h,loading:l(a).loading,class:"px-6 shadow-lg shadow-blue-500/20"},{default:v(()=>[...s[3]||(s[3]=[_(" Izlash ",-1)])]),_:1},8,["loading"]),c(g,{variant:"ghost",onClick:I,class:"h-10 w-10 flex items-center justify-center rounded-lg border border-slate-200 text-slate-400 hover:bg-red-50 hover:text-red-500 transition-all"},{default:v(()=>[c(l(F),{class:"w-4 h-4"})]),_:1})])]),e("div",ee,[e("div",te,[e("table",se,[s[9]||(s[9]=e("thead",null,[e("tr",{class:"bg-slate-50/80 border-b border-slate-200 text-slate-400"},[e("th",{class:"w-[12%] px-4 py-5 text-[10px] font-black uppercase tracking-[0.1em] text-center"},"Sana"),e("th",{class:"w-[38%] px-4 py-5 text-[10px] font-black uppercase tracking-[0.1em] text-left"},"Hujjat ma'lumotlari"),e("th",{class:"w-[12%] px-4 py-5 text-[10px] font-black uppercase tracking-[0.1em] text-center"},"Muddat"),e("th",{class:"w-[18%] px-4 py-5 text-[10px] font-black uppercase tracking-[0.1em] text-left"},"Mas'ul xodim"),e("th",{class:"w-[20%] px-4 py-5 text-[10px] font-black uppercase tracking-[0.1em] text-center"},"Holat")])],-1)),l(a).loading?b("",!0):(d(),r("tbody",ae,[(d(!0),r(p,null,u(l(a).tasks,t=>(d(),r(p,{key:t.id},[e("tr",{class:w(["group border-b border-slate-50 hover:bg-blue-50/20 transition-all cursor-pointer",{"bg-blue-50/40":x.value===t.id}]),onClick:i=>D(t.id)},[e("td",oe,o(t.document?.created_at?l(j)(t.document.created_at).format("DD.MM.YYYY"):"--"),1),e("td",ne,[e("div",re,[e("div",de,[e("span",ie,"ID: "+o(t.id),1),e("span",ce,"â„– "+o(t.document?.in_number||"---"),1)]),e("span",pe,o(t.document?.title),1)])]),e("td",ue,[e("span",xe,o(t.due_date?l(j)(t.due_date).format("DD.MM.YYYY"):"--"),1)]),e("td",be,[e("div",he,[e("div",ge,o(t.assignees?.[0]?.last_name?.charAt(0)||"U"),1),e("span",fe,o(t.assignees?.[0]?.last_name||"---"),1)])]),e("td",{class:"px-4 py-5 text-center",onClick:s[1]||(s[1]=H(()=>{},["stop"]))},[e("div",_e,[(d(),r(p,null,u(Y,i=>e("button",{key:i.id,onClick:f=>q(t.id,i.id),class:w(["px-4 py-1.5 rounded-lg text-[10px] font-black flex items-center gap-1.5 transition-all",t.status===i.id?"bg-white shadow-sm text-blue-700":"text-slate-400 hover:text-slate-600"])},o(i.name),11,me)),64))])])],10,le),x.value===t.id?(d(),r("tr",ke,[e("td",ye,[e("div",ve,[e("div",we,[e("div",je,[s[4]||(s[4]=e("h4",{class:"text-[10px] font-black text-blue-600 uppercase tracking-widest mb-3"},"Hujjat tafsilotlari",-1)),e("p",Me,o(t.document?.title),1),e("p",Ce,o(t.document?.summary||"Ma'lumot kiritilmagan"),1)]),t.document?.attachments?.length?(d(),r("div",Be,[s[5]||(s[5]=e("h5",{class:"text-[10px] font-bold text-slate-400 uppercase ml-1"},"Asosiy ilovalar:",-1)),(d(!0),r(p,null,u(t.document.attachments,(i,f)=>(d(),r("a",{key:f,href:M(i.file),target:"_blank",class:"flex items-center justify-between p-3 bg-white rounded-xl border border-slate-100 text-xs font-bold text-slate-700 hover:border-blue-400 hover:text-blue-600 transition-all group"},[e("div",Ye,[c(l(N),{class:"w-4 h-4 text-slate-400 group-hover:text-blue-500"}),e("span",null,o(i.file_name||"Ilova qilingan hujjat"),1)]),c(l(E),{class:"w-3 h-3 opacity-0 group-hover:opacity-100"})],8,Ve))),128))])):b("",!0)]),e("div",De,[c(l(G),{class:"absolute -right-4 -top-4 w-24 h-24 text-white/10"}),s[6]||(s[6]=e("h4",{class:"text-[10px] font-black uppercase tracking-widest mb-4 text-blue-100"},"Topshiriq mazmuni",-1)),e("p",qe,o(t.description||"Izoh qoldirilmagan"),1),e("div",Se,[c(U,{class:"w-5 h-5 bg-white/20 rounded-full"}),e("span",null,"Yuboruvchi: "+o(t.document?.sender?.name||"---"),1)])]),e("div",Ie,[s[8]||(s[8]=e("h4",{class:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1"},"Bajarilgan ishlar (Responses)",-1)),t.responses?.length?(d(),r("div",Pe,[(d(!0),r(p,null,u(t.responses,i=>(d(),r("div",{key:i.id,class:"p-4 bg-white rounded-2xl border border-slate-200 shadow-sm hover:border-blue-200 transition-all"},[e("div",Ue,[e("span",ze,o(i.user_full_name),1),e("span",Ae,o(l(j)(i.created_at).format("DD.MM.YYYY HH:mm")),1)]),e("p",He,o(i.description),1),i.files?.length?(d(),r("div",Te,[(d(!0),r(p,null,u(i.files,(f,B)=>(d(),r("a",{key:B,href:M(f.file),target:"_blank",class:"flex items-center gap-3 p-2.5 bg-slate-50 rounded-xl border border-slate-100 hover:bg-blue-50 hover:border-blue-200 transition-all group/file"},[c(l(L),{class:"w-4 h-4 text-blue-500"}),e("span",Fe,"Javob fayli #"+o(B+1),1),c(l(R),{class:"w-3 h-3 ml-auto text-slate-400 group-hover/file:text-blue-600"})],8,$e))),128))])):b("",!0)]))),128))])):(d(),r("div",Le,[c(l(J),{class:"w-8 h-8 text-slate-300 mb-2"}),s[7]||(s[7]=e("p",{class:"text-[10px] text-slate-400 font-bold uppercase tracking-tight"},"Hali javoblar yuklanmagan",-1))]))])])])])):b("",!0)],64))),128))]))]),l(a).loading?(d(),r("div",Re,[...s[10]||(s[10]=[e("div",{class:"w-10 h-10 border-4 border-blue-100 border-t-blue-600 rounded-full animate-spin"},null,-1)])])):b("",!0)]),e("footer",Ee,[e("div",Je,[s[11]||(s[11]=_(" Jami: ",-1)),e("span",Ne,o(l(a).pagination.count||0),1),s[12]||(s[12]=_(" ta topshiriq mavjud ",-1))]),c($,{total:l(a).pagination.count,currentPage:l(a).pagination.currentPage,lastPage:Math.ceil((l(a).pagination.count||0)/10),onChange:s[2]||(s[2]=t=>l(a).fetchAll(t))},null,8,["total","currentPage","lastPage"])])])])])}}},at=z(Ge,[["__scopeId","data-v-47b2b5e1"]]);export{at as default};
