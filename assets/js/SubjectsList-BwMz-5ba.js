import{b as e,u as a}from"./index-Bbk9u_eB.js";import{u as t}from"./subjectStore-CApgYJVN.js";import{B as s}from"./BaseCrudTable-DuefH3Qn.js";import{B as l,c as r,o as i,e as o,b as d,t as c,w as n,u,O as p,x as m,z as f,F as b,r as h}from"./vue-vendor-D8IdSx1h.js";import{u as x}from"./useFormValidate-WCLlqkIO.js";import{X as y,y as v,z as g}from"./ui-vendor-Dpi5LIj3.js";import{_ as w}from"./BaseTableHeader-tCkohxt0.js";import"./utils-DZp7J2GC.js";/* empty css                                                                      */const _={class:"flex flex-col w-[700px]"},j={class:"flex justify-between modal-border items-center p-[14px] border-b"},k={class:"text-gray-600 text-lg font-bold uppercase"},C={class:"flex flex-wrap -mx-2 p-4"},q={class:"w-full px-2 py-2"},B={class:"justify-end border-t modal-card modal-border flex items-center p-4"},z={__name:"SubjectsForm",props:{id:{type:Number,default:null}},setup(s){const f=t(),b=e(),h=a(),{form:v,errors:g,validate:w,resetForm:z}=x({title:""},{title:{required:!0,message:"Majburiy"}}),F=s,N=!!F.id,S=async()=>{if(w())try{N?(await f.update(F.id,v),h.show("Muvaffaqiyatli yangilandi","success")):(await f.create(v),h.show("Muvaffaqiyatli yaratildi","success")),T(),z()}catch(e){h.show("Xatolik yuz berdi","")}},T=()=>b.close();return(e,a)=>{const t=l("UButton"),s=l("UInput");return i(),r("div",_,[o("div",j,[o("p",k,c(N?"Yangilash":"Yangi"),1),d(t,{customClass:"bg-gray-300 rounded-full p-1",onClick:T},{default:n(()=>[d(u(y),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),o("form",{onSubmit:m(S,["prevent"]),class:"space-y-6"},[o("div",C,[o("div",q,[d(s,{modelValue:u(v).title,"onUpdate:modelValue":a[0]||(a[0]=e=>u(v).title=e),label:"Nazorat turi",placeholder:"Nazorat turi kiritng",error:u(g).title},null,8,["modelValue","error"])])]),o("div",B,[d(t,{type:"button",onClick:T,variant:"ghost",disabled:u(f).loading},{default:n(()=>[...a[1]||(a[1]=[p("Bekor qilish",-1)])]),_:1},8,["disabled"]),d(t,{type:"submit",variant:"primary",loading:u(f).loading},{default:n(()=>[p(c(N?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},F={class:"max-w-xl max-h-xl"},N={class:"justify-between border-b modal-card flex items-center p-4"},S={class:"justify-end border-t modal-card flex gap-2 p-4"},T={__name:"SubjectsDelete",props:{id:{type:Number,required:!0}},setup(s){const c=s,m=t(),f=a(),b=e(),h=async()=>{try{await m.remove(c.id),f.show("Muvaffaqiyatli o‘chirildi!","success"),b.close()}catch(e){f.show("Xatolik yuz berdi!","error")}};return(e,a)=>{const t=l("UButton");return i(),r("div",F,[o("div",N,[a[2]||(a[2]=o("p",{class:"text-gray-600 text-lg font-semibold"},"O‘chirish",-1)),d(t,{customClass:"bg-gray-300 rounded-full p-1",onClick:a[0]||(a[0]=e=>u(b).close())},{default:n(()=>[d(u(y),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),a[5]||(a[5]=o("div",{class:"p-4 text-center space-y-4"},[o("p",{class:"text-base text-dark"},"Siz rostdan hamo o‘chirmoqchi bo'lsangiz, tasdiqlang!")],-1)),o("div",S,[d(t,{onClick:a[1]||(a[1]=e=>u(b).close()),disabled:u(m).loading},{default:n(()=>[...a[3]||(a[3]=[p("Bekor qilish",-1)])]),_:1},8,["disabled"]),d(t,{variant:"danger",onClick:h,loading:u(m).loading},{default:n(()=>[...a[4]||(a[4]=[p("O‘chirish",-1)])]),_:1},8,["loading"])])])}}},U={class:"flex flex-col gap-4 items-center"},M={class:"table-header"},V={class:"px-4 py-3 flex"},O={__name:"SubjectsList",setup(a){const p=t(),m=e(),x=()=>m.open(z);return f(()=>{p.fetchAll()}),(e,a)=>{const t=l("UButton");return i(),r("div",U,[d(w,{title:"Nazorat turi",buttonText:"Qo‘shish",onAddNew:x}),d(s,null,{thead:n(()=>[...a[0]||(a[0]=[o("th",{class:"table-header uppercase"},"Nomi",-1),o("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:n(()=>[(i(!0),r(b,null,h(u(p).subjects,e=>(i(),r("tr",{key:e.id,class:"hover:bg-[#F4F6FC] divide-x"},[o("td",M,c(e.title),1),o("td",V,[d(t,{variant:"hover",onClick:a=>{return t=e.id,m.open(z,{id:t});var t}},{default:n(()=>[d(u(v),{class:"w-5 h-5"})]),_:1},8,["onClick"]),d(t,{variant:"hover",onClick:a=>{return t=e.id,m.open(T,{id:t});var t}},{default:n(()=>[d(u(g),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{O as default};
