import{b as e,u as a,f as s}from"./index-Prv8vSnk.js";import{u as t}from"./departmentStore-D0rgSd1x.js";import{B as l}from"./BaseCrudTable-Bo112uMz.js";import{_ as r}from"./BaseTableHeader-CEs1aIUm.js";import{B as o,c as i,o as d,e as n,b as c,t as u,w as p,u as m,N as f,x as h,z as b,F as x,r as v}from"./vue-vendor-VaL6RChx.js";import{u as y}from"./useFormValidate-Wk5HUh9e.js";import{X as w,y as g,z as _}from"./ui-vendor-CHl9FvfL.js";import"./utils-DZp7J2GC.js";/* empty css                                                                      */const k={class:"flex flex-col w-[700px]"},B={class:"flex justify-between modal-border items-center p-[14px] border-b"},j={class:"text-black text-md font-bold uppercase"},C={class:"flex flex-wrap -mx-2 p-4"},q={class:"w-full px-2 py-2"},M={class:"justify-end border-t modal-card modal-border flex items-center p-4"},Y={__name:"DepartmentForm",props:{id:{type:Number,default:null}},setup(s){const l=t(),r=e(),b=a(),{form:x,errors:v,validate:g,resetForm:_}=y({name:""},{name:{required:!0,message:"Majburiy"}}),Y=s,F=!!Y.id,z=async()=>{if(g())try{F?(await l.update(Y.id,x),b.show("Muvaffaqiyatli yangilandi","success")):(await l.create(x),b.show("Muvaffaqiyatli yaratildi","success")),D(),_()}catch(e){b.show("Xatolik yuz berdi","")}},D=()=>r.close();return(e,a)=>{const s=o("UButton"),t=o("UInput");return d(),i("div",k,[n("div",B,[n("p",j,u(F?"Yangilash":"Yangi"),1),c(s,{customClass:"bg-[#475467] rounded-full p-1",onClick:D},{default:p(()=>[c(m(w),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),n("form",{onSubmit:h(z,["prevent"]),class:"space-y-6"},[n("div",C,[n("div",q,[c(t,{modelValue:m(x).name,"onUpdate:modelValue":a[0]||(a[0]=e=>m(x).name=e),label:"Bo'lim",placeholder:"Bo'lim kiriting",error:m(v).name},null,8,["modelValue","error"])])]),n("div",M,[c(s,{type:"button",variant:"ghost",onClick:D,disabled:m(l).loading},{default:p(()=>[...a[1]||(a[1]=[f("Bekor qilish",-1)])]),_:1},8,["disabled"]),c(s,{type:"submit",variant:"primary",loading:m(l).loading},{default:p(()=>[f(u(F?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},F={class:"max-w-xl max-h-xl"},z={class:"flex justify-between modal-border items-center p-[14px] border-b"},D={class:"justify-end border-t modal-card flex gap-2 p-4"},T={__name:"DepartmentDelete",props:{id:{type:Number,required:!0}},setup(s){const l=s,r=t(),u=a(),h=e(),b=async()=>{try{await r.remove(l.id),u.show("Muvaffaqiyatli o‘chirildi!","success"),h.close()}catch(e){u.show("Xatolik yuz berdi!","error")}};return(e,a)=>{const s=o("UButton");return d(),i("div",F,[n("div",z,[a[2]||(a[2]=n("p",{class:"text-dark text-lg font-bold uppercase"},"O‘chirish",-1)),c(s,{customClass:"bg-[#475467] rounded-full p-1",onClick:a[0]||(a[0]=e=>m(h).close())},{default:p(()=>[c(m(w),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),a[5]||(a[5]=n("div",{class:"p-4 text-center space-y-4"},[n("p",{class:"text-base text-dark"},"Siz rostdan hamo o‘chirmoqchimisiz?")],-1)),n("div",D,[c(s,{variant:"ghost",onClick:a[1]||(a[1]=e=>m(h).close()),disabled:m(r).loading},{default:p(()=>[...a[3]||(a[3]=[f("Bekor qilish",-1)])]),_:1},8,["disabled"]),c(s,{variant:"danger",onClick:b,loading:m(r).loading},{default:p(()=>[...a[4]||(a[4]=[f("O‘chirish",-1)])]),_:1},8,["loading"])])])}}},U={class:"flex flex-col gap-4 items-center h-screen overflow-y-auto px-2"},N={class:"p-6 w-full"},S={class:"px-4 py-3 border-r"},V={class:"px-4 py-3 border-r"},A={class:"px-4 py-3 flex"},O={__name:"DepartmentList",setup(a){const f=t(),h=e(),y=()=>h.open(Y);return b(()=>f.fetchAll()),(e,a)=>{const t=o("UButton");return d(),i("div",U,[c(r,{title:"Bo'limlar",buttonText:"Bo'lim qo‘shish",onAddNew:y}),n("div",N,[c(l,null,{thead:p(()=>[...a[0]||(a[0]=[n("th",{class:"table-header uppercase"},"Bo'lim",-1),n("th",{class:"table-header uppercase"},"Yaratilgan",-1),n("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:p(()=>[(d(!0),i(x,null,v(m(f).departments,e=>(d(),i("tr",{key:e.id,class:"hover:bg-[#F4F6FC]"},[n("td",S,u(e.name),1),n("td",V,u(m(s)(e.created_at).format("DD MMMM YYYY")),1),n("td",A,[c(t,{variant:"hover",onClick:a=>{return s=e.id,h.open(Y,{id:s});var s}},{default:p(()=>[c(m(g),{class:"w-5 h-5"})]),_:1},8,["onClick"]),c(t,{variant:"hover",onClick:a=>{return s=e.id,h.open(T,{id:s});var s}},{default:p(()=>[c(m(_),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})]),a[1]||(a[1]=n("div",{class:"w-full h-44"},null,-1))])}}};export{O as default};
