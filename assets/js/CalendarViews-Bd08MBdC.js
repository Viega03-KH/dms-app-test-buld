import{_ as e,e as a,f as t}from"./index-UQS6FCx4.js";import{u as s}from"./taskStore-BIr3WcEM.js";import{j as l,c as r,o as n,F as i,r as o,e as d,b as u,u as c,t as v,p as y,w as m,a as g,f as h,q as b,z as p,k as f,B as x}from"./vue-vendor-VaL6RChx.js";import{_ as k}from"./UFileCard-zjZcZlj9.js";import{p as w,b as _,c as Y,x as C,h as M}from"./ui-vendor-CHl9FvfL.js";import"./utils-DZp7J2GC.js";const j={class:"space-y-4 min-h-screen"},D=["onClick"],A={class:"flex items-center gap-4 min-w-0"},z={class:"p-2 bg-blue-100 rounded-lg shrink-0"},B={class:"min-w-0"},E={class:"flex items-center gap-2 mt-1"},F={class:"text-md font-bold text-gray-800"},I={class:"flex items-center gap-2 mt-1"},N={class:"text-xs font-medium text-gray-600 line-clamp-1"},S={class:"flex items-center bg-gray-400 rounded-full gap-3 shrink-0"},q={key:0,class:"overflow-hidden bg-white border-t border-gray-100"},H={class:"p-4 grid-cols-1 gap-6 space-y-4"},L={class:"space-y-4"},O={class:"text-sm text-gray-700 leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100"},T={class:"space-y-4"},U={key:0},V={class:"grid grid-cols-1 gap-2"},J=e({__name:"TaskcalendarViews",props:{tasks:{type:Array,default:()=>[]}},setup(e){const a=l(null),t=e=>{e.style.height="0",e.style.opacity="0"},s=e=>{e.style.transition="all 350ms cubic-bezier(0.4, 0, 0.2, 1)",e.style.height=e.scrollHeight+"px",e.style.opacity="1"},p=e=>{e.style.height="auto"},f=e=>{e.style.height=e.scrollHeight+"px"},x=e=>{requestAnimationFrame(()=>{e.style.transition="all 300ms cubic-bezier(0.4, 0, 0.2, 1)",e.style.height="0",e.style.opacity="0"})};return(l,Y)=>(n(),r("div",j,[(n(!0),r(i,null,o(e.tasks,e=>(n(),r("div",{key:e.id,class:"bg-white border border-gray-200 rounded-md transition-all duration-200 overflow-hidden"},[d("div",{onClick:t=>{return s=e.id,void(a.value=a.value===s?null:s);var s},class:"p-4 cursor-pointer flex items-center justify-between gap-4 select-none"},[d("div",A,[d("div",z,[u(c(w),{class:"text-blue-600",size:22})]),d("div",B,[d("div",E,[d("span",F,v(e.document.in_number),1)]),d("div",I,[d("span",N,v(e.document.summary),1)])])]),d("div",S,[u(c(_),{class:y(["text-white transition-transform duration-300",{"rotate-180":a.value===e.id}]),size:20},null,8,["class"])])],8,D),u(b,{onBeforeEnter:t,onEnter:s,onAfterEnter:p,onBeforeLeave:f,onLeave:x},{default:m(()=>[a.value===e.id?(n(),r("div",q,[d("div",H,[d("div",L,[d("div",null,[d("p",O,v(e.document.summary||"Ma'lumot kiritilmagan"),1)])]),d("div",T,[e.document.attachments?.length?(n(),r("div",U,[d("div",V,[(n(!0),r(i,null,o(e.document.attachments,e=>(n(),h(k,{key:e.id,file:e},null,8,["file"]))),128))])])):g("",!0)])])])):g("",!0)]),_:2},1024)]))),128))]))}},[["__scopeId","data-v-66781320"]]),P={class:"w-full p-4 bg-white overflow-y-scroll h-screen"},G={class:"flex justify-between items-center mb-4"},K={class:"text-xl font-bold text-gray-800 dark:text-gray-100"},Q={class:"flex items-center justify-between gap-4"},R={class:"grid grid-cols-7 py-2 text-center font-semibold text-gray-600 dark:text-gray-300"},W={class:"grid grid-cols-7 divide-y divide-x"},X=["onClick"],Z={class:"text-md font-medium text-gray-500 text-end"},$={key:0,class:"absolute bottom-2 left-2 flex gap-1"},ee={key:0,class:"text-xs text-gray-500"},ae=e({__name:"CalendarViews",setup(e){const h=s(),b=a();p(()=>h.fetchAll());const k=f(()=>{const e={};return h.tasks.forEach(a=>{a.due_date&&(e[a.due_date]||(e[a.due_date]=[]),e[a.due_date].push(a))}),e});const w=l(t().month()),_=l(t().year()),j=["Dushanba","Seshanab","Chorshanba","Payshanba","Juma","Shanba","Yakshanba"],D=["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"],A=f(()=>{const e=t().year(_.value).month(w.value).date(1),a=e.endOf("month"),s=e.day(),l=[];for(let t=0;t<s;t++){const a=e.subtract(s-t,"day");l.push({date:a.format("YYYY-MM-DD"),dayNumber:a.date(),isCurrentMonth:!1})}for(let r=1;r<=a.date();r++){const e=t().year(_.value).month(w.value).date(r);l.push({date:e.format("YYYY-MM-DD"),dayNumber:r,isCurrentMonth:!0})}return l});function z(){const e=t().year(_.value).month(w.value).date(1).subtract(1,"month");w.value=e.month(),_.value=e.year()}function B(){const e=t().year(_.value).month(w.value).date(1).add(1,"month");w.value=e.month(),_.value=e.year()}return(e,a)=>{const s=x("UButton");return n(),r("div",P,[d("div",G,[d("h2",K,v(D[w.value])+" "+v(_.value),1),d("div",Q,[u(s,{onClick:z,variant:"hover"},{default:m(()=>[u(c(C),{class:"text-gray-500"})]),_:1}),u(c(Y),{class:"text-gray-500"}),u(s,{onClick:B,variant:"hover"},{default:m(()=>[u(c(M),{class:"text-gray-500"})]),_:1})])]),d("div",R,[(n(),r(i,null,o(j,e=>d("div",{key:e},v(e),1)),64))]),d("div",W,[(n(!0),r(i,null,o(A.value,e=>{return n(),r("div",{key:e.date,class:y(["h-32 p-2 cursor-pointer hover:bg-gray-100 relative",{"bg-blue-100 dark:bg-blue-900":(a=e.date,t().format("YYYY-MM-DD")===a),"bg-gray-100 dark:bg-gray-700":!e.isCurrentMonth}]),onClick:a=>function(e){const a=k.value[e];a&&a.length&&b.openDrawer(J,{tasks:a},{title:"Topshiriqlar",side:"right"})}(e.date)},[d("div",Z,v(e.dayNumber),1),k.value[e.date]?(n(),r("div",$,[(n(!0),r(i,null,o(k.value[e.date].slice(0,3),e=>(n(),r("span",{key:e.id,class:"w-2 h-2 rounded-full bg-blue-400"}))),128)),k.value[e.date].length>3?(n(),r("span",ee,"+"+v(k.value[e.date].length-3),1)):g("",!0)])):g("",!0)],10,X);var a}),128))]),a[0]||(a[0]=d("div",{class:"w-full h-44"},null,-1))])}}},[["__scopeId","data-v-3be25a63"]]);export{ae as default};
