import{j as e,l as a,k as l,c as s,a as t,P as r,t as o,e as i,b as d,u,p as n,w as c,B as m,F as p,r as v,f,q as b,Q as x,o as g}from"./vue-vendor-D8IdSx1h.js";import{a as y}from"./UserListItem-iVce6OIZ.js";import{_ as h}from"./index-CJLFOwbl.js";import{W as w,b as k,Y as _}from"./ui-vendor-CdXc56Eq.js";const j={class:"flex flex-col gap-1 w-full"},I={key:0,class:"text-md font-bold"},S={class:"relative"},C={class:"flex items-center gap-3 text-gray-400"},U={key:0,class:"absolute mt-2 w-full bg-white border rounded-lg shadow z-50 max-h-80 flex flex-col"},z={class:"p-2 border-b"},L={class:"overflow-auto max-h-[400px] divide-y divide-gray-100"},V={key:0,class:"text-blue-500"},$={key:0,class:"p-8 text-center text-sm text-gray-400 italic"},A=h({__name:"MultiColumnUserSelect",props:{options:{type:Array,default:()=>[]},selectedIds:{type:Array,default:()=>[]},label:String,placeholder:{type:String,default:"Ijrochini tanlang"},error:String},emits:["select","search"],setup(h,{emit:A}){const M=h,Q=A,T=e(!1),q=e("");let B=null;a(q,e=>{B&&clearTimeout(B),B=setTimeout(()=>{Q("search",e)},400)});const F=()=>{T.value=!T.value,T.value||(q.value="")},N=()=>{T.value=!1,q.value=""},P=e=>M.selectedIds.includes(e),W=l(()=>{if(!q.value)return M.options;const e=q.value.toLowerCase();return M.options.filter(a=>`${a.first_name||""} ${a.last_name||""} ${a.department?.name||""}`.toLowerCase().includes(e))});return(e,a)=>{const l=m("UInput"),A=x("click-outside");return g(),s("div",j,[h.label?(g(),s("label",I,o(h.label),1)):t("",!0),r((g(),s("div",S,[i("div",{onClick:F,class:n(["border border-[rgba(226,230,245,1)] shadow-sm bg-white rounded-xl px-4 py-3 flex justify-between items-center cursor-pointer transition",{"border-blue-500 ring-1 ring-blue-400":T.value,"border-red-400":h.error}])},[i("div",C,[d(u(w)),i("span",null,o(h.placeholder),1)]),d(u(k),{class:n(["transition text-gray-400",{"rotate-180":T.value}])},null,8,["class"])],2),d(b,{name:"fade"},{default:c(()=>[T.value?(g(),s("div",U,[i("div",z,[d(l,{modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=e=>q.value=e),type:"text",placeholder:"Qidirish..."},null,8,["modelValue"])]),i("ul",L,[(g(!0),s(p,null,v(W.value,e=>(g(),f(y,{key:e.id,user:e,"custom-class":P(e.id)?"bg-gray-100 cursor-not-allowed":"hover:bg-gray-50",onSelect:a=>{return!P(e.id)&&(l=e.id,void(M.selectedIds.includes(l)||(Q("select",l),q.value="",T.value=!1)));var l}},{action:c(()=>[P(e.id)?(g(),s("span",V,[d(u(_),{size:20,"stroke-width":"2"})])):t("",!0)]),_:2},1032,["user","custom-class","onSelect"]))),128)),W.value.length?t("",!0):(g(),s("li",$,[...a[1]||(a[1]=[i("div",{class:"flex flex-col items-center gap-2"},"Natija topilmadi",-1)])]))])])):t("",!0)]),_:1})])),[[A,N]])])}}},[["__scopeId","data-v-0ca7ade6"]]);export{A as M};
