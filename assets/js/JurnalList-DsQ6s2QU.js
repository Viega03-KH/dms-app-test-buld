import{u as e}from"./jurnalStore-D0nKvd38.js";import{u as a,b as s}from"./index-UQS6FCx4.js";import{B as t}from"./BaseCrudTable-CSUoLckS.js";import{_ as r}from"./BaseTableHeader-Ch6ERfBu.js";import{X as l,y as i,z as o}from"./ui-vendor-CHl9FvfL.js";import{B as d,c as n,o as u,e as c,b as p,w as m,u as f,N as h,t as b,x,z as v,F as y,r as g}from"./vue-vendor-VaL6RChx.js";import{u as w}from"./useFormValidate-Wk5HUh9e.js";import"./utils-DZp7J2GC.js";/* empty css                                                                      */const _={class:"max-w-xl max-h-xl"},k={class:"flex justify-between modal-border items-center p-[14px] border-b"},j={class:"justify-end border-t modal-card flex gap-2 p-4"},C={__name:"JurnalDelete",props:{id:{type:Number,required:!0}},setup(t){const r=t,i=e(),o=a(),b=s(),x=async()=>{try{await i.remove(r.id),o.show("Muvaffaqiyatli o‘chirildi!","success"),b.close()}catch(e){o.show("Xatolik yuz berdi!","error")}};return(e,a)=>{const s=d("UButton");return u(),n("div",_,[c("div",k,[a[2]||(a[2]=c("p",{class:"text-dark text-lg font-bold uppercase"},"O‘chirish",-1)),p(s,{customClass:"bg-[#475467] rounded-full p-1",onClick:a[0]||(a[0]=e=>f(b).close())},{default:m(()=>[p(f(l),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),a[5]||(a[5]=c("div",{class:"p-4 text-center space-y-4"},[c("p",{class:"text-base text-dark"},"Siz rostdan hamo o‘chirmoqchimisiz?")],-1)),c("div",j,[p(s,{onClick:a[1]||(a[1]=e=>f(b).close()),variant:"ghost",disabled:f(i).loading},{default:m(()=>[...a[3]||(a[3]=[h("Bekor qilish",-1)])]),_:1},8,["disabled"]),p(s,{variant:"danger",onClick:x,loading:f(i).loading},{default:m(()=>[...a[4]||(a[4]=[h("O‘chirish",-1)])]),_:1},8,["loading"])])])}}},B={class:"flex flex-col w-[700px]"},q={class:"flex justify-between modal-border items-center p-[14px] border-b"},F={class:"text-dark text-lg font-bold uppercase"},z={class:"flex flex-wrap -mx-2 p-4"},J={class:"w-full px-2 py-2"},N={class:"justify-end border-t modal-card modal-border flex items-center p-4"},T={__name:"JurnalForm",props:{id:{type:Number,default:null}},setup(t){const r=e(),i=s(),o=a(),{form:v,errors:y,validate:g,resetForm:_}=w({name:""},{name:{required:!0,message:"Majburiy"}}),k=t,j=!!k.id,C=async()=>{if(g())try{j?(await r.update(k.id,v),o.show("Muvaffaqiyatli yangilandi","success")):(await r.create(v),o.show("Muvaffaqiyatli yaratildi","success")),T(),_()}catch(e){o.show("Xatolik yuz berdi","")}},T=()=>i.close();return(e,a)=>{const s=d("UButton"),t=d("UInput");return u(),n("div",B,[c("div",q,[c("p",F,b(j?"Yangilash":"Yangi"),1),p(s,{customClass:"bg-[#475467] rounded-full p-1",onClick:T},{default:m(()=>[p(f(l),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),c("form",{onSubmit:x(C,["prevent"]),class:"space-y-6"},[c("div",z,[c("div",J,[p(t,{modelValue:f(v).name,"onUpdate:modelValue":a[0]||(a[0]=e=>f(v).name=e),label:"Jurnal",placeholder:"Jurnal kiriting",error:f(y).name},null,8,["modelValue","error"])])]),c("div",N,[p(s,{type:"button",variant:"ghost",onClick:T,disabled:f(r).loading},{default:m(()=>[...a[1]||(a[1]=[h("Bekor qilish",-1)])]),_:1},8,["disabled"]),p(s,{type:"submit",variant:"primary",loading:f(r).loading},{default:m(()=>[h(b(j?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},U={class:"flex flex-col gap-4 items-center"},M={class:"px-4 py-3 border-r"},S={class:"px-4 py-3 flex"},V={__name:"JurnalList",setup(a){const l=e(),h=s(),x=()=>h.open(T);return v(()=>l.fetchAll()),(e,a)=>{const s=d("UButton");return u(),n("div",U,[p(r,{title:"Jurnallar ro'yxati",buttonText:"Qo‘shish",onAddNew:x}),p(t,null,{thead:m(()=>[...a[0]||(a[0]=[c("th",{class:"table-header uppercase"},"Nomi",-1),c("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:m(()=>[(u(!0),n(y,null,g(f(l).jurnals,e=>(u(),n("tr",{key:e.id,class:"hover:bg-[#F4F6FC]"},[c("td",M,b(e.name),1),c("td",S,[p(s,{variant:"hover",onClick:a=>{return s=e.id,h.open(T,{id:s});var s}},{default:m(()=>[p(f(i),{class:"w-5 h-5"})]),_:1},8,["onClick"]),p(s,{variant:"hover",onClick:a=>{return s=e.id,h.open(C,{id:s});var s}},{default:m(()=>[p(f(o),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{V as default};
