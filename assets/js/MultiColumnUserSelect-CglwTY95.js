import{j as e,l as a,k as l,c as s,a as t,O as r,t as o,e as i,b as d,u,p as n,w as c,B as m,F as p,r as v,f,q as b,P as x,o as g}from"./vue-vendor-VaL6RChx.js";import{a as y}from"./UserListItem-CafjY3mg.js";import{_ as h}from"./index-hOpDXQV6.js";import{V as w,b as k,W as _}from"./ui-vendor-DFLFBWqj.js";const j={class:"flex flex-col gap-1 w-full"},I={key:0,class:"text-md font-bold"},S={class:"relative"},C={class:"flex items-center gap-3 text-gray-400"},U={key:0,class:"absolute mt-2 w-full bg-white border rounded-lg shadow z-50 max-h-80 flex flex-col"},V={class:"p-2 border-b"},z={class:"overflow-auto max-h-[400px] divide-y divide-gray-100"},L={key:0,class:"text-blue-500"},$={key:0,class:"p-8 text-center text-sm text-gray-400 italic"},A=h({__name:"MultiColumnUserSelect",props:{options:{type:Array,default:()=>[]},selectedIds:{type:Array,default:()=>[]},label:String,placeholder:{type:String,default:"Ijrochini tanlang"},error:String},emits:["select","search"],setup(h,{emit:A}){const M=h,T=A,q=e(!1),B=e("");let F=null;a(B,e=>{F&&clearTimeout(F),F=setTimeout(()=>{T("search",e)},400)});const N=()=>{q.value=!q.value,q.value||(B.value="")},O=()=>{q.value=!1,B.value=""},P=e=>M.selectedIds.includes(e),Q=l(()=>{if(!B.value)return M.options;const e=B.value.toLowerCase();return M.options.filter(a=>`${a.first_name||""} ${a.last_name||""} ${a.department?.name||""}`.toLowerCase().includes(e))});return(e,a)=>{const l=m("UInput"),A=x("click-outside");return g(),s("div",j,[h.label?(g(),s("label",I,o(h.label),1)):t("",!0),r((g(),s("div",S,[i("div",{onClick:N,class:n(["border border-[rgba(226,230,245,1)] shadow-sm bg-white rounded-xl px-4 py-3 flex justify-between items-center cursor-pointer transition",{"border-blue-500 ring-1 ring-blue-400":q.value,"border-red-400":h.error}])},[i("div",C,[d(u(w)),i("span",null,o(h.placeholder),1)]),d(u(k),{class:n(["transition text-gray-400",{"rotate-180":q.value}])},null,8,["class"])],2),d(b,{name:"fade"},{default:c(()=>[q.value?(g(),s("div",U,[i("div",V,[d(l,{modelValue:B.value,"onUpdate:modelValue":a[0]||(a[0]=e=>B.value=e),type:"text",placeholder:"Qidirish..."},null,8,["modelValue"])]),i("ul",z,[(g(!0),s(p,null,v(Q.value,e=>(g(),f(y,{key:e.id,user:e,"custom-class":P(e.id)?"bg-gray-100 cursor-not-allowed":"hover:bg-gray-50",onSelect:a=>{return!P(e.id)&&(l=e.id,void(M.selectedIds.includes(l)||(T("select",l),B.value="",q.value=!1)));var l}},{action:c(()=>[P(e.id)?(g(),s("span",L,[d(u(_),{size:20,"stroke-width":"2"})])):t("",!0)]),_:2},1032,["user","custom-class","onSelect"]))),128)),Q.value.length?t("",!0):(g(),s("li",$,[...a[1]||(a[1]=[i("div",{class:"flex flex-col items-center gap-2"},"Natija topilmadi",-1)])]))])])):t("",!0)]),_:1})])),[[A,O]])])}}},[["__scopeId","data-v-0ca7ade6"]]);export{A as M};
