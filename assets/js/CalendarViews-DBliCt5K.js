import{_ as e,e as t,f as a}from"./index-CJLFOwbl.js";import{u as s}from"./taskStore-_S_nF6jN.js";import{j as r,B as l,c as n,o,F as i,r as d,e as u,b as c,u as v,t as y,p as m,w as h,a as b,f as g,q as p,z as f,k as x}from"./vue-vendor-D8IdSx1h.js";import{o as k,b as w,w as _,c as C,x as j,h as Y}from"./ui-vendor-CdXc56Eq.js";import"./utils-DZp7J2GC.js";const M={class:"space-y-4 min-h-screen"},D=["onClick"],z={class:"flex items-center gap-4 min-w-0"},A={class:"p-2 bg-blue-50 rounded-lg shrink-0"},L={class:"min-w-0"},U={class:"flex items-center gap-2 mt-1"},B={class:"text-xs font-medium text-gray-800"},E={class:"flex items-center gap-2 mt-1"},F={class:"text-xs font-medium text-gray-600 line-clamp-1"},I={class:"flex items-center gap-3 shrink-0"},N={key:0,class:"overflow-hidden bg-white border-t border-gray-100"},O={class:"p-4 grid-cols-1 gap-6 space-y-4"},R={class:"space-y-4"},S={class:"text-sm text-gray-700 leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100"},q={class:"space-y-4"},H={key:0},T={class:"grid grid-cols-1 gap-2"},V={class:"flex items-center gap-3 min-w-0"},J={class:"p-1.5 text-blue-400 rounded-full group-hover:bg-blue-500 group-hover:text-white/50 transition-colors"},P=e({__name:"TaskcalendarViews",props:{tasks:{type:Array,default:()=>[]}},setup(e){const t=r(null),a=e=>{e.style.height="0",e.style.opacity="0"},s=e=>{e.style.transition="all 350ms cubic-bezier(0.4, 0, 0.2, 1)",e.style.height=e.scrollHeight+"px",e.style.opacity="1"},f=e=>{e.style.height="auto"},x=e=>{e.style.height=e.scrollHeight+"px"},C=e=>{requestAnimationFrame(()=>{e.style.transition="all 300ms cubic-bezier(0.4, 0, 0.2, 1)",e.style.height="0",e.style.opacity="0"})};return(r,j)=>{const Y=l("UButton");return o(),n("div",M,[(o(!0),n(i,null,d(e.tasks,e=>(o(),n("div",{key:e.id,class:"bg-white border border-gray-200 rounded-xl shadow-sm transition-all duration-200 hover:shadow-md overflow-hidden"},[u("div",{onClick:a=>{return s=e.id,void(t.value=t.value===s?null:s);var s},class:"p-4 cursor-pointer flex items-center justify-between gap-4 select-none"},[u("div",z,[u("div",A,[c(v(k),{class:"text-blue-600",size:22})]),u("div",L,[u("div",U,[u("span",B,y(e.document.in_number),1)]),u("div",E,[u("span",F,y(e.description),1)])])]),u("div",I,[c(v(w),{class:m(["text-gray-400 transition-transform duration-300",{"rotate-180 text-blue-600":t.value===e.id}]),size:20},null,8,["class"])])],8,D),c(p,{onBeforeEnter:a,onEnter:s,onAfterEnter:f,onBeforeLeave:x,onLeave:C},{default:h(()=>[t.value===e.id?(o(),n("div",N,[u("div",O,[u("div",R,[u("div",null,[u("p",S,y(e.document.summary||"Ma'lumot kiritilmagan"),1)])]),u("div",q,[e.document.attachments.length?(o(),n("div",H,[u("div",T,[(o(!0),n(i,null,d(e.document.attachments,e=>(o(),g(Y,{key:e.id,onClick:t=>(async(e,t)=>{try{const a=await fetch(e),s=await a.blob(),r=window.URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r)}catch(a){window.open(e,"_blank")}})(e.file,`Hujjat_${e.id}.pdf`),class:"group w-full justify-between flex items-center p-2.5 bg-white border border-gray-200 rounded-full hover:border-blue-200 hover:bg-blue-50/30 transition-all text-left"},{default:h(()=>[u("div",V,[u("div",J,[c(v(_),{"stroke-width":"2.5",size:16})]),j[0]||(j[0]=u("span",{class:"text-xs font-medium text-gray-700 truncate"},"Fayl",-1))])]),_:1},8,["onClick"]))),128))])])):b("",!0)])])])):b("",!0)]),_:2},1024)]))),128))])}}},[["__scopeId","data-v-1067b6e7"]]),$={class:"w-full p-4 bg-white overflow-y-scroll h-screen"},G={class:"flex justify-between items-center mb-4"},K={class:"text-xl font-bold text-gray-800 dark:text-gray-100"},Q={class:"flex items-center justify-between gap-4"},W={class:"grid grid-cols-7 py-2 text-center font-semibold text-gray-600 dark:text-gray-300"},X={class:"grid grid-cols-7 divide-y divide-x"},Z=["onClick"],ee={class:"text-md font-medium text-gray-500 text-end"},te={key:0,class:"absolute bottom-2 left-2 flex gap-1"},ae={key:0,class:"text-xs text-gray-500"},se=e({__name:"CalendarViews",setup(e){const g=s(),p=t();f(()=>g.fetchAll());const k=x(()=>{const e={};return g.tasks.forEach(t=>{t.due_date&&(e[t.due_date]||(e[t.due_date]=[]),e[t.due_date].push(t))}),e});const w=r(a().month()),_=r(a().year()),M=["Dushanba","Seshanab","Chorshanba","Payshanba","Juma","Shanba","Yakshanba"],D=["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"],z=x(()=>{const e=a().year(_.value).month(w.value).date(1),t=e.endOf("month"),s=e.day(),r=[];for(let a=0;a<s;a++){const t=e.subtract(s-a,"day");r.push({date:t.format("YYYY-MM-DD"),dayNumber:t.date(),isCurrentMonth:!1})}for(let l=1;l<=t.date();l++){const e=a().year(_.value).month(w.value).date(l);r.push({date:e.format("YYYY-MM-DD"),dayNumber:l,isCurrentMonth:!0})}return r});function A(){const e=a().year(_.value).month(w.value).date(1).subtract(1,"month");w.value=e.month(),_.value=e.year()}function L(){const e=a().year(_.value).month(w.value).date(1).add(1,"month");w.value=e.month(),_.value=e.year()}return(e,t)=>{const s=l("UButton");return o(),n("div",$,[u("div",G,[u("h2",K,y(D[w.value])+" "+y(_.value),1),u("div",Q,[c(s,{onClick:A,variant:"hover"},{default:h(()=>[c(v(j),{class:"text-gray-500"})]),_:1}),c(v(C),{class:"text-gray-500"}),c(s,{onClick:L,variant:"hover"},{default:h(()=>[c(v(Y),{class:"text-gray-500"})]),_:1})])]),u("div",W,[(o(),n(i,null,d(M,e=>u("div",{key:e},y(e),1)),64))]),u("div",X,[(o(!0),n(i,null,d(z.value,e=>{return o(),n("div",{key:e.date,class:m(["h-32 p-2 cursor-pointer hover:bg-gray-100 relative",{"bg-blue-100 dark:bg-blue-900":(t=e.date,a().format("YYYY-MM-DD")===t),"bg-gray-100 dark:bg-gray-700":!e.isCurrentMonth}]),onClick:t=>function(e){const t=k.value[e];t&&t.length&&p.openDrawer(P,{tasks:t},{title:"Topshiriqlar",side:"right"})}(e.date)},[u("div",ee,y(e.dayNumber),1),k.value[e.date]?(o(),n("div",te,[(o(!0),n(i,null,d(k.value[e.date].slice(0,3),e=>(o(),n("span",{key:e.id,class:"w-2 h-2 rounded-full bg-blue-400"}))),128)),k.value[e.date].length>3?(o(),n("span",ae,"+"+y(k.value[e.date].length-3),1)):b("",!0)])):b("",!0)],10,Z);var t}),128))]),t[0]||(t[0]=u("div",{class:"w-full h-44"},null,-1))])}}},[["__scopeId","data-v-3be25a63"]]);export{se as default};
