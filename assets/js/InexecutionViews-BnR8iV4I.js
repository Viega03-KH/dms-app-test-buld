import{f as e,b as a}from"./index-Bbk9u_eB.js";import{c as s,o as l,e as t,t as i,u as r,p as d,a as o,b as n,O as c,F as u,r as m,f as p,j as v,Z as b,z as f,A as x,P as g,w as k,B as h,Q as w}from"./vue-vendor-D8IdSx1h.js";import{_ as y,a as _}from"./UserListItem-iVce6OIZ.js";import{_ as j}from"./UFileCard-B0s9c_ge.js";import{_ as F}from"./UPagination-BTpY5yYN.js";import{_ as T}from"./TaskForm-DZEBMZeo.js";import{u as M}from"./taskStore-fg2m-3Kx.js";import{S as q,y as C,z as D}from"./ui-vendor-Dpi5LIj3.js";import"./utils-DZp7J2GC.js";import"./usersStore-fKCvmNci.js";import"./subjectStore-CApgYJVN.js";import"./useFormValidate-WCLlqkIO.js";import"./MultiColumnUserSelect-BO7eWjXw.js";const Y={class:"flex flex-row"},V={class:"flex-1 min-w-0"},B={class:"flex flex-row items-center justify-between pb-2"},S={class:"text-sm font-extrabold text-black"},U={class:"text-sm font-medium text-[#697696]"},P={class:"flex flex-col gap-y-2"},z={class:"flex flex-row items-center justify-between"},I={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},A={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},H={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},O={__name:"TaskListItem",props:{task:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup:a=>(o,n)=>(l(),s("div",{onClick:n[0]||(n[0]=e=>o.$emit("select",a.task)),class:d(["task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",a.active?"bg-[#4076FF0D]":""])},[t("div",Y,[t("div",V,[t("div",B,[t("h4",S,i(a.task.document.in_number),1),t("h4",U,i(r(e)(a.task.doc_data).format("DD MMMM YYYY")),1)]),t("div",P,[t("div",z,[t("span",I,i(a.task.document.out_number),1)]),t("span",A,i(a.task.document.summary),1),t("span",H,"Bajarish mudati: "+i(r(e)(a.task.due_date).format("DD MMMM YYYY")),1)])])])],2))},Q={key:0},L={class:"grid grid-cols-2 gap-4 pb-4 p-[24px]"},J={class:"w-full flex flex-col border-t border-gray-100 bg-white shadow-sm rounded-lg mt-4"},K={class:"flex items-center justify-between px-6 py-3 border-b border-gray-50"},Z={class:"font-bold text-gray-800 text-base flex items-center gap-2"},$={class:"ml-1 text-xs bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full"},E={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},G={class:"divide-y divide-gray-100"},N={key:1,class:"p-[24px]"},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},W={key:0},X={class:"grid grid-cols-2 gap-2"},ee={__name:"TaskShowItem",props:{task:{type:Object,default:null}},setup:a=>(d,v)=>(l(),s(u,null,[a.task?(l(),s("div",Q,[t("div",L,[n(y,{label:"Bajarish muddati",value:r(e)(a.task.due_date).format("DD MMMM YYYY")},null,8,["value"]),n(y,{label:"Topshiriq",value:a.task.subject.title},null,8,["value"]),n(y,{label:"Topshiriq mazmun",value:a.task.description,class:"col-span-2"},null,8,["value"])]),t("div",J,[t("div",K,[t("h3",Z,[v[0]||(v[0]=t("span",{class:"w-1.5 h-5 bg-blue-600 rounded-full"},null,-1)),v[1]||(v[1]=c(" Ijrochilar ",-1)),t("span",$,i(a.task.assignees?.length||0),1)])]),t("div",E,[t("div",G,[(l(!0),s(u,null,m(a.task.assignees,(e,a)=>(l(),p(_,{key:e.id,user:e,"is-responsible":0===a},null,8,["user","is-responsible"]))),128))])])]),v[2]||(v[2]=t("div",{class:"bg-[#F4F6FC] w-full h-14"},null,-1))])):o("",!0),a.task.document?(l(),s("div",N,[t("div",R,[n(y,{label:"Kiruvchi raqam",value:a.task.document.in_number},null,8,["value"]),n(y,{label:"Chiqish raqami",value:a.task.document.out_number},null,8,["value"]),n(y,{label:"Hujjat nomi",value:a.task.document.title,class:"md:col-span-2"},null,8,["value"]),n(y,{label:"Hujjat nomi",value:a.task.document.summary,class:"md:col-span-2"},null,8,["value"]),n(y,{label:"Hujjatni Imzololovchi",value:a.task.document.signer},null,8,["value"]),n(y,{label:"Jurnal",value:a.task.document.journal.name},null,8,["value"])]),a.task.document.attachments?.length?(l(),s("div",W,[v[3]||(v[3]=t("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),t("div",X,[(l(!0),s(u,null,m(a.task.document.attachments,e=>(l(),p(j,{key:e.id,file:e},null,8,["file"]))),128))])])):o("",!0)])):o("",!0)],64))},ae={class:"mx-auto"},se={class:"grid grid-cols-1 lg:grid-cols-12"},le={class:"col-span-12 md:col-span-5 2xl:col-span-3"},te={class:"card-dark border-b-2 border-x shadow-sm"},ie={class:"flex px-1 py-3 items-center border-b card-border justify-between"},re={class:"flex items-center"},de={class:"flex gap-1"},oe={class:"h-[calc(100vh-8rem)] overflow-y-auto"},ne={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-3 h-[calc(100vh-4rem)] overflow-y-auto"},ce={class:"card-dark rounded-b border-b border-x"},ue={key:0},me={class:"flex px-1 py-2 items-center border-b card-border justify-between"},pe={class:"flex items-center gap-2"},ve={key:1,class:"flex flex-col"},be={class:"grid grid-cols-3 p-6 gap-4"},fe={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},xe={__name:"InexecutionViews",setup(e){const i=M(),d=a(),o=v(null),c=b({due_date:"",assignee:"",created_at:""}),y=[{label:"Bajarilgan",name:"done"},{label:"Muddtidan kech",name:"done_overdue"},{label:"Tasdiqlshda",name:"in_confirmation"},{label:"Bajarilmoqda",name:"in_progress"},{label:"Bajarilmadi",name:"be_rejected"}],_=e=>i.setSelectedTask(e),j=e=>i.fetchAll(e),Y=()=>{i.selectedTask&&d.open(T,{existingTask:{...i.selectedTask}})},V=()=>i.setSelectedTask(null),B=async()=>{await i.setFilter("status",o.value||""),await i.setFilter("due_date",c.due_date),await i.setFilter("assignee",c.assignee),await i.setFilter("created_at",c.created_at)},S=async()=>{o.value=null,c.due_date="",c.assignee="",c.created_at="",await i.setFilter("status",""),await i.setFilter("due_date",""),await i.setFilter("assignee",""),await i.setFilter("created_at","")};return f(()=>i.fetchAll()),x(()=>{i.filters={status:"",due_date:"",assignee:null,created_at:"",search:""},i.currentPage=1}),(e,a)=>{const d=h("UButton"),v=h("USelect"),b=h("UDatePicker"),f=w("wave");return l(),s("div",ae,[t("div",se,[t("div",le,[t("div",te,[t("div",ie,[t("div",re,[g((l(),p(d,{onClick:V,variant:"hover"},{default:k(()=>[n(r(q),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[f]]),a[3]||(a[3]=t("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Topshiriqlar",-1))]),t("div",de,[n(F,{currentPage:r(i).pagination.currentPage,previous:r(i).pagination.previous,next:r(i).pagination.next,lastPage:Math.ceil(r(i).pagination.count/10),total:r(i).pagination.count,loading:r(i).loading,onChange:j},null,8,["currentPage","previous","next","lastPage","total","loading"])])]),t("div",oe,[(l(!0),s(u,null,m(r(i).tasks,e=>(l(),p(O,{key:e.id,task:e,active:r(i).selectedTask?.id===e.id,onSelect:_},null,8,["task","active"]))),128)),a[4]||(a[4]=t("div",{class:"h-24 w-full"},null,-1))])])]),t("div",ne,[t("div",ce,[r(i).selectedTask?(l(),s("div",ue,[t("div",me,[a[6]||(a[6]=t("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Biriktirilgan topshiriq",-1)),t("div",pe,[n(d,{onClick:Y,variant:"primary"},{default:k(()=>[n(r(C),{"stroke-width":"3",class:"text-white w-6 h-4"}),a[5]||(a[5]=t("span",{class:"px-1"},"Tahrirlash",-1))]),_:1})])]),n(ee,{task:r(i).selectedTask},null,8,["task"]),a[7]||(a[7]=t("div",{class:"flex p-4 bg-[#F4F6FC]"},null,-1))])):(l(),s("div",ve,[t("div",null,[a[8]||(a[8]=t("div",{class:"flex p-3 items-center card-border border-b justify-between"},[t("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),t("div",be,[n(v,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e),options:y,"option-label":"","option-value":"name",placeholder:"Topshiriq holati"},null,8,["modelValue"]),n(b,{modelValue:c.due_date,"onUpdate:modelValue":a[1]||(a[1]=e=>c.due_date=e),label:"",placeholder:"Topshiriq muddati"},null,8,["modelValue"]),n(b,{modelValue:c.created_at,"onUpdate:modelValue":a[2]||(a[2]=e=>c.created_at=e),label:"",placeholder:"Topshiriq yaratilgan sana"},null,8,["modelValue"])])]),t("div",fe,[n(d,{class:"flex items-center",onClick:S},{default:k(()=>[n(r(D),{"stroke-width":"2.5",class:"w-5 h-5"}),a[9]||(a[9]=t("span",{class:"px-2"},"Tozalash",-1))]),_:1}),n(d,{variant:"primary",class:"flex items-center",onClick:B},{default:k(()=>[n(r(q),{"stroke-width":"2.5",class:"w-5 h-5"}),a[10]||(a[10]=t("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))]),a[11]||(a[11]=t("div",{class:"w-full h-48"},null,-1))])])])}}};export{xe as default};
