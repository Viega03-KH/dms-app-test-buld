import{u as a}from"./jurnalStore-X9fz4pBd.js";import{u as e,b as s}from"./index-Bbk9u_eB.js";import{B as t}from"./BaseCrudTable-DuefH3Qn.js";import{_ as r}from"./BaseTableHeader-tCkohxt0.js";import{X as l,y as o,z as i}from"./ui-vendor-Dpi5LIj3.js";import{B as d,c as n,o as u,e as c,b as p,w as m,u as f,O as h,t as b,x,z as y,F as v,r as g}from"./vue-vendor-D8IdSx1h.js";import{u as w}from"./useFormValidate-WCLlqkIO.js";import"./utils-DZp7J2GC.js";/* empty css                                                                      */const _={class:"max-w-xl max-h-xl"},k={class:"flex justify-between modal-border items-center p-[14px] border-b"},j={class:"justify-end border-t modal-card flex gap-2 p-4"},C={__name:"JurnalDelete",props:{id:{type:Number,required:!0}},setup(t){const r=t,o=a(),i=e(),b=s(),x=async()=>{try{await o.remove(r.id),i.show("Muvaffaqiyatli o‘chirildi!","success"),b.close()}catch(a){i.show("Xatolik yuz berdi!","error")}};return(a,e)=>{const s=d("UButton");return u(),n("div",_,[c("div",k,[e[2]||(e[2]=c("p",{class:"text-gray-600 text-lg font-bold uppercase"},"O‘chirish",-1)),p(s,{customClass:"bg-gray-300 rounded-full p-1",onClick:e[0]||(e[0]=a=>f(b).close())},{default:m(()=>[p(f(l),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e[5]||(e[5]=c("div",{class:"p-4 text-center space-y-4"},[c("p",{class:"text-base text-dark"},"Siz rostdan hamo o‘chirmoqchi bo‘lsangiz, tasdiqlang!")],-1)),c("div",j,[p(s,{onClick:e[1]||(e[1]=a=>f(b).close()),variant:"ghost",disabled:f(o).loading},{default:m(()=>[...e[3]||(e[3]=[h("Bekor qilish",-1)])]),_:1},8,["disabled"]),p(s,{variant:"danger",onClick:x,loading:f(o).loading},{default:m(()=>[...e[4]||(e[4]=[h("O‘chirish",-1)])]),_:1},8,["loading"])])])}}},q={class:"flex flex-col w-[700px]"},B={class:"flex justify-between modal-border items-center p-[14px] border-b"},F={class:"text-gray-600 text-lg font-bold uppercase"},z={class:"flex flex-wrap -mx-2 p-4"},J={class:"w-full px-2 py-2"},T={class:"justify-end border-t modal-card modal-border flex items-center p-4"},U={__name:"JurnalForm",props:{id:{type:Number,default:null}},setup(t){const r=a(),o=s(),i=e(),{form:y,errors:v,validate:g,resetForm:_}=w({name:""},{name:{required:!0,message:"Majburiy"}}),k=t,j=!!k.id,C=async()=>{if(g())try{j?(await r.update(k.id,y),i.show("Muvaffaqiyatli yangilandi","success")):(await r.create(y),i.show("Muvaffaqiyatli yaratildi","success")),U(),_()}catch(a){i.show("Xatolik yuz berdi","")}},U=()=>o.close();return(a,e)=>{const s=d("UButton"),t=d("UInput");return u(),n("div",q,[c("div",B,[c("p",F,b(j?"Yangilash":"Yangi"),1),p(s,{customClass:"bg-gray-300 rounded-full p-1",onClick:U},{default:m(()=>[p(f(l),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),c("form",{onSubmit:x(C,["prevent"]),class:"space-y-6"},[c("div",z,[c("div",J,[p(t,{modelValue:f(y).name,"onUpdate:modelValue":e[0]||(e[0]=a=>f(y).name=a),label:"Jurnal",placeholder:"Jurnal kiriting",error:f(v).name},null,8,["modelValue","error"])])]),c("div",T,[p(s,{type:"button",variant:"ghost",onClick:U,disabled:f(r).loading},{default:m(()=>[...e[1]||(e[1]=[h("Bekor qilish",-1)])]),_:1},8,["disabled"]),p(s,{type:"submit",variant:"primary",loading:f(r).loading},{default:m(()=>[h(b(j?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},M={class:"flex flex-col gap-4 items-center"},N={class:"px-4 py-3 border-r"},S={class:"px-4 py-3 flex"},V={__name:"JurnalList",setup(e){const l=a(),h=s(),x=()=>h.open(U);return y(()=>l.fetchAll()),(a,e)=>{const s=d("UButton");return u(),n("div",M,[p(r,{title:"Jurnallar ro'yxati",buttonText:"Qo‘shish",onAddNew:x}),p(t,null,{thead:m(()=>[...e[0]||(e[0]=[c("th",{class:"table-header uppercase"},"Nomi",-1),c("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:m(()=>[(u(!0),n(v,null,g(f(l).jurnals,a=>(u(),n("tr",{key:a.id,class:"hover:bg-[#F4F6FC]"},[c("td",N,b(a.name),1),c("td",S,[p(s,{variant:"hover",onClick:e=>{return s=a.id,h.open(U,{id:s});var s}},{default:m(()=>[p(f(o),{class:"w-5 h-5"})]),_:1},8,["onClick"]),p(s,{variant:"hover",onClick:e=>{return s=a.id,h.open(C,{id:s});var s}},{default:m(()=>[p(f(i),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{V as default};
