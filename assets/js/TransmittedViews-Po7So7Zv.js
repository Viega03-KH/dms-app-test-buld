import{g as e,f as a,b as l,d as s,U as t,i as o}from"./index-Bbk9u_eB.js";import{N as i,G as c,S as r,n,y as d,J as u,z as m}from"./ui-vendor-Dpi5LIj3.js";import{k as p,c as v,o as f,e as k,u as h,t as x,f as b,p as j,g as y,a as g,b as w,F as _,r as D,l as F,z as C,P as M,w as q,Q as V}from"./vue-vendor-D8IdSx1h.js";import{_ as S}from"./UserListItem-iVce6OIZ.js";import{_ as Y}from"./UFileCard-B0s9c_ge.js";import{u as U,_ as z,a as P}from"./CreateDockForm-D-Y083g0.js";import{_ as A}from"./TaskForm-DZEBMZeo.js";import{_ as T}from"./UPagination-BTpY5yYN.js";import"./utils-DZp7J2GC.js";import"./useFormValidate-WCLlqkIO.js";import"./OrganizationForm-gOpZsrae.js";import"./doctypeStore-vjwiVhC9.js";import"./deliveryStore-By45-QLm.js";import"./jurnalStore-X9fz4pBd.js";import"./taskStore-fg2m-3Kx.js";import"./usersStore-fKCvmNci.js";import"./subjectStore-CApgYJVN.js";import"./MultiColumnUserSelect-BO7eWjXw.js";const Q={class:"flex flex-row"},H={class:"flex-1 min-w-0"},I={class:"flex items-center justify-between"},K={class:"flex flex-col py-2"},O={class:"flex items-center justify-between"},B={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},J={class:"flex-1 min-w-0 py-1 text-sm font-medium text-[#697696] line-clamp-2"},L={__name:"DockListItem",props:{dock:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(l){const s=e(),t=(e,a)=>{s.open(e,{x:a.clientX+10,y:a.clientY+10})},o=l,r=p(()=>a(o.dock.doc_date).format("DD MMMM YYYY")),n={attached:{name:"Asosiy file mavjud",icon:c,color:"text-green-500"},draft:{name:"File mavjud emas.",icon:i,color:"text-yellow-500"}},d=p(()=>n[o.dock.status]||{name:"Noma'lum",icon:c,color:"text-gray-500"});return(e,a)=>(f(),v("div",{onClick:a[6]||(a[6]=a=>e.$emit("select",l.dock)),class:j(["task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",l.active?"bg-[#4076FF0D]":""])},[k("div",Q,[k("div",H,[k("div",I,[k("h4",{onMouseenter:a[0]||(a[0]=e=>t("Kiruvchi raqam",e)),onMouseleave:a[1]||(a[1]=e=>h(s).close()),class:"text-sm font-extrabold text-black"},x(l.dock.in_number),33),k("h4",{onMouseenter:a[2]||(a[2]=e=>t("Ro`yxarga olingan sana",e)),onMouseleave:a[3]||(a[3]=e=>h(s).close()),class:"text-sm font-medium text-[#697696]"},x(r.value),33)]),k("div",K,[k("div",O,[k("span",B,x(l.dock.in_date),1),(f(),b(y(d.value.icon),{class:j(["w-5 h-5",d.value.color]),onMouseenter:a[4]||(a[4]=e=>t(d.value.name,e)),onMouseleave:a[5]||(a[5]=e=>h(s).close())},null,40,["class"]))]),k("span",J,x(l.dock.summary),1)])])])],2))}},N={key:0},R={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},G={key:0},X={class:"grid grid-cols-2 gap-2"},$={__name:"DockShowItem",props:{dockfile:{type:Object,default:null}},setup:e=>(l,s)=>e.dockfile?(f(),v("div",N,[k("div",R,[w(S,{label:"Chiqish sansi",value:h(a)(e.dockfile.in_date).format("DD MMMM YYYY")},null,8,["value"]),w(S,{label:"Chiqish raqam",value:e.dockfile.out_number},null,8,["value"]),w(S,{label:"Kiruvchi raqam",value:e.dockfile.in_number},null,8,["value"]),w(S,{label:"Hujjat nomi",value:e.dockfile.title,class:"md:col-span-2"},null,8,["value"]),w(S,{label:"Qisqa mazmun",value:e.dockfile.summary,class:"md:col-span-2"},null,8,["value"]),w(S,{label:"Tashkilot",value:e.dockfile.sender?.name},null,8,["value"]),w(S,{label:"Hujjat turi",value:e.dockfile.document_type?.name},null,8,["value"]),w(S,{label:"Yetkazib berish usuli",value:e.dockfile.delivery_type?.name},null,8,["value"]),w(S,{label:"Jurnal",value:e.dockfile.journal.name},null,8,["value"])]),e.dockfile.attachments?.length?(f(),v("div",G,[s[0]||(s[0]=k("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),k("div",X,[(f(!0),v(_,null,D(e.dockfile.attachments,e=>(f(),b(Y,{key:e.id,file:e},null,8,["file"]))),128))])])):g("",!0)])):g("",!0)},E={class:"mx-auto"},W={class:"grid grid-cols-1 lg:grid-cols-12"},Z={class:"col-span-12 md:col-span-5 2xl:col-span-3"},ee={class:"card-dark border-b-2 border-x shadow-sm"},ae={class:"flex px-1 py-3 items-center border-b card-border justify-between"},le={class:"flex items-center"},se={class:"flex gap-1"},te={class:"h-[calc(100vh-8rem)] overflow-y-auto"},oe={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-3 h-[calc(100vh-4rem)] overflow-y-auto"},ie={class:"card-dark rounded-b border-b border-x"},ce={key:0},re={class:"flex px-1 py-2 items-center border-b card-border justify-between"},ne={class:"flex items-center gap-2"},de={class:"flex justify-end p-4 bg-[#F4F6FC]"},ue={key:1,class:"flex flex-col"},me={class:"grid grid-cols-3 p-6 gap-4"},pe={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},ve={__name:"TransmittedViews",setup(e){const a=U(),i=l(),c=[{label:"Qoralama hujjatlar",name:"draft"},{label:"Ro`yxatga olingan hujjatlar",name:"attached"}],p=e=>a.fetchAll(e),x=e=>{a.selectedDock=e},j=()=>{a.selectedDock=null},y=()=>a.fetchAll(1),g=()=>{a.status="",a.in_number="",a.out_number="",a.fetchAll(1)},S=()=>{a.selectedDock&&i.open(A,{id:a.selectedDock.id})},Y=()=>{a.selectedDock&&i.open(z,{selectedFile:a.selectedDock})},Q=()=>{a.selectedDock&&i.open(P,{fileID:a.selectedDock.id})},H=()=>{a.selectedDock&&i.open(P,{file:a.selectedDock})};return F(()=>a.docks,e=>{if(a.selectedDock){const l=e.find(e=>e.id===a.selectedDock.id);a.selectedDock=l||null}},{deep:!0}),C(()=>{a.fetchAll(1)}),(e,l)=>{const i=V("wave");return f(),v("div",E,[k("div",W,[k("div",Z,[k("div",ee,[k("div",ae,[k("div",le,[M((f(),b(s,{onClick:j,variant:"hover"},{default:q(()=>[w(h(r),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[i]]),l[3]||(l[3]=k("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Hujjatlar",-1))]),k("div",se,[w(T,{currentPage:h(a).pagination.currentPage,previous:h(a).pagination.previous,next:h(a).pagination.next,lastPage:Math.ceil(h(a).pagination.count/10),total:h(a).pagination.count,loading:h(a).loading,onChange:p},null,8,["currentPage","previous","next","lastPage","total","loading"])])]),k("div",te,[(f(!0),v(_,null,D(h(a).docks,e=>(f(),b(L,{key:e.id,dock:e,active:h(a).selectedDock?.id===e.id,onSelect:x},null,8,["dock","active"]))),128)),l[4]||(l[4]=k("div",{class:"h-24 w-full"},null,-1))])])]),k("div",oe,[k("div",ie,[h(a).selectedDock?(f(),v("div",ce,[k("div",re,[l[7]||(l[7]=k("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Kiruvchi hujjat",-1)),k("div",ne,[w(s,{onClick:S,variant:"primary"},{default:q(()=>[w(h(n),{"stroke-width":"3",class:"text-white"}),l[5]||(l[5]=k("span",{class:"px-1"},"Topshiriq yaratish",-1))]),_:1}),w(s,{onClick:Y,variant:"primary"},{default:q(()=>[w(h(d),{"stroke-width":"3",class:"text-white w-6 h-4"}),l[6]||(l[6]=k("span",{class:"px-1"},"Tahrirlash",-1))]),_:1})])]),w($,{dockfile:h(a).selectedDock,class:"p-6"},null,8,["dockfile"]),k("div",de,[h(a).selectedDock?.attachments?.length?(f(),b(s,{key:0,onClick:H,variant:"primary"},{default:q(()=>[w(h(u),{"stroke-width":"2",class:"text-white"}),l[8]||(l[8]=k("span",{class:"px-1"},"File va ilovani yangilash",-1))]),_:1})):(f(),b(s,{key:1,onClick:Q,variant:"primary"},{default:q(()=>[w(h(u),{"stroke-width":"2",class:"text-white"}),l[9]||(l[9]=k("span",{class:"px-1"},"File va ilova qo'shish",-1))]),_:1}))])])):(f(),v("div",ue,[k("div",null,[l[10]||(l[10]=k("div",{class:"flex p-3 items-center card-border border-b justify-between"},[k("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),k("div",me,[w(t,{modelValue:h(a).status,"onUpdate:modelValue":l[0]||(l[0]=e=>h(a).status=e),options:c,"option-label":"label","option-value":"name",placeholder:"Hujjat holati"},null,8,["modelValue"]),w(o,{modelValue:h(a).in_number,"onUpdate:modelValue":l[1]||(l[1]=e=>h(a).in_number=e),placeholder:"Kiruvchi hujjat raqami"},null,8,["modelValue"]),w(o,{modelValue:h(a).out_number,"onUpdate:modelValue":l[2]||(l[2]=e=>h(a).out_number=e),placeholder:"Chiqish hujjat raqami"},null,8,["modelValue"])])]),k("div",pe,[w(s,{class:"flex items-center",onClick:g},{default:q(()=>[w(h(m),{"stroke-width":"2.5",class:"w-5 h-5"}),l[11]||(l[11]=k("span",{class:"px-2"},"Tozalash",-1))]),_:1}),w(s,{variant:"primary",class:"flex items-center",onClick:y},{default:q(()=>[w(h(r),{"stroke-width":"2.5",class:"w-5 h-5"}),l[12]||(l[12]=k("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))])])])])}}};export{ve as default};
