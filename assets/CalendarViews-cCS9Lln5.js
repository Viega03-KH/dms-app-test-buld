import{k as E,_ as j,d as B,r as F,a as r,o as n,F as f,C as x,b as s,g as u,f as b,v as _,n as U,N,h as k,q as C,c as S,T as V,M as z,l as A,B as L,O as v,P as I}from"./index-CCDjh50H.js";import{u as O}from"./taskStore-6dywxdbk.js";import{F as q}from"./file-text-CmO73v42.js";import{C as R}from"./chevron-left-BlZX--ht.js";import{C as H}from"./chevron-right-WHC7EkOp.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=E("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),J={class:"space-y-4 min-h-screen"},Z=["onClick"],G={class:"flex items-center gap-4 min-w-0"},K={class:"p-2 bg-blue-50 rounded-lg shrink-0"},Q={class:"min-w-0"},W={class:"flex items-center gap-2 mt-1"},X={class:"text-xs font-medium text-gray-400"},ee={class:"flex items-center gap-3 shrink-0"},te={key:0,class:"overflow-hidden bg-white border-t border-gray-100"},se={class:"p-4 grid-cols-1 gap-6 space-y-4"},ae={class:"space-y-4"},oe={class:"text-sm text-gray-700 leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100"},ne={class:"space-y-4"},re={key:0},le={class:"grid grid-cols-1 gap-2"},ie={class:"flex items-center gap-3 min-w-0"},de={class:"p-1.5 text-blue-400 rounded-full group-hover:bg-blue-500 group-hover:text-white/50 transition-colors"},ce={__name:"TaskcalendarViews",props:{tasks:{type:Array,default:()=>[]}},setup(T){const h=B(null),M=t=>{h.value=h.value===t?null:t},m=async(t,y)=>{try{const l=await(await fetch(t)).blob(),e=window.URL.createObjectURL(l),a=document.createElement("a");a.href=e,a.download=y,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(e)}catch{window.open(t,"_blank")}},D=t=>{t.style.height="0",t.style.opacity="0"},d=t=>{t.style.transition="all 350ms cubic-bezier(0.4, 0, 0.2, 1)",t.style.height=t.scrollHeight+"px",t.style.opacity="1"},c=t=>{t.style.height="auto"},Y=t=>{t.style.height=t.scrollHeight+"px"},$=t=>{requestAnimationFrame(()=>{t.style.transition="all 300ms cubic-bezier(0.4, 0, 0.2, 1)",t.style.height="0",t.style.opacity="0"})};return(t,y)=>{const g=F("UButton");return n(),r("div",J,[(n(!0),r(f,null,x(T.tasks,l=>(n(),r("div",{key:l.id,class:"bg-white border border-gray-200 rounded-xl shadow-sm transition-all duration-200 hover:shadow-md overflow-hidden"},[s("div",{onClick:e=>M(l.id),class:"p-4 cursor-pointer flex items-center justify-between gap-4 select-none"},[s("div",G,[s("div",K,[u(b(q),{class:"text-blue-600",size:22})]),s("div",Q,[s("div",W,[s("span",X,_(l.document.in_number),1)])])]),s("div",ee,[u(b(N),{class:U(["text-gray-400 transition-transform duration-300",{"rotate-180 text-blue-600":h.value===l.id}]),size:20},null,8,["class"])])],8,Z),u(V,{onBeforeEnter:D,onEnter:d,onAfterEnter:c,onBeforeLeave:Y,onLeave:$},{default:k(()=>[h.value===l.id?(n(),r("div",te,[s("div",se,[s("div",ae,[s("div",null,[s("p",oe,_(l.document.summary||"Ma'lumot kiritilmagan"),1)])]),s("div",ne,[l.document.attachments.length?(n(),r("div",re,[s("div",le,[(n(!0),r(f,null,x(l.document.attachments,e=>(n(),S(g,{key:e.id,onClick:a=>m(e.file,`Hujjat_${e.id}.pdf`),class:"group w-full justify-between flex items-center p-2.5 bg-white border border-gray-200 rounded-full hover:border-blue-200 hover:bg-blue-50/30 transition-all text-left"},{default:k(()=>[s("div",ie,[s("div",de,[u(b(P),{"stroke-width":"2.5",size:16})]),y[0]||(y[0]=s("span",{class:"text-xs font-medium text-gray-700 truncate"},"Fayl",-1))])]),_:1},8,["onClick"]))),128))])])):C("",!0)])])])):C("",!0)]),_:2},1024)]))),128))])}}},ue=j(ce,[["__scopeId","data-v-e33d2da1"]]),he={class:"w-full p-4 bg-white overflow-y-scroll h-screen"},me={class:"flex justify-between items-center mb-4"},ve={class:"text-xl font-bold text-gray-800 dark:text-gray-100"},_e={class:"flex items-center justify-between gap-4"},ye={class:"grid grid-cols-7 py-2 text-center font-semibold text-gray-600 dark:text-gray-300"},be={class:"grid grid-cols-7 divide-y divide-x"},ge=["onClick"],pe={class:"text-md font-medium text-gray-500 text-end"},fe={key:0,class:"absolute bottom-2 left-2 flex gap-1"},xe={key:0,class:"text-xs text-gray-500"},we={__name:"CalendarViews",setup(T){const h=O(),M=z();A(()=>h.fetchAll());const m=L(()=>{const e={};return h.tasks.forEach(a=>{a.due_date&&(e[a.due_date]||(e[a.due_date]=[]),e[a.due_date].push(a))}),e});function D(e){const a=m.value[e];!a||!a.length||M.openDrawer(ue,{tasks:a},{title:"Topshiriqlar",side:"right"})}const d=B(v().month()),c=B(v().year()),Y=["Dushanba","Seshanab","Chorshanba","Payshanba","Juma","Shanba","Yakshanba"],$=["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avgust","Sentabr","Oktabr","Noyabr","Dekabr"],t=L(()=>{const e=v().year(c.value).month(d.value).date(1),a=e.endOf("month"),p=e.day(),o=[];for(let i=0;i<p;i++){const w=e.subtract(p-i,"day");o.push({date:w.format("YYYY-MM-DD"),dayNumber:w.date(),isCurrentMonth:!1})}for(let i=1;i<=a.date();i++){const w=v().year(c.value).month(d.value).date(i);o.push({date:w.format("YYYY-MM-DD"),dayNumber:i,isCurrentMonth:!0})}return o});function y(){const e=v().year(c.value).month(d.value).date(1).subtract(1,"month");d.value=e.month(),c.value=e.year()}function g(){const e=v().year(c.value).month(d.value).date(1).add(1,"month");d.value=e.month(),c.value=e.year()}function l(e){return v().format("YYYY-MM-DD")===e}return(e,a)=>{const p=F("UButton");return n(),r("div",he,[s("div",me,[s("h2",ve,_($[d.value])+" "+_(c.value),1),s("div",_e,[u(p,{onClick:y,variant:"hover"},{default:k(()=>[u(b(R),{class:"text-gray-500"})]),_:1}),u(b(I),{class:"text-gray-500"}),u(p,{onClick:g,variant:"hover"},{default:k(()=>[u(b(H),{class:"text-gray-500"})]),_:1})])]),s("div",ye,[(n(),r(f,null,x(Y,o=>s("div",{key:o},_(o),1)),64))]),s("div",be,[(n(!0),r(f,null,x(t.value,o=>(n(),r("div",{key:o.date,class:U(["h-32 p-2 cursor-pointer hover:bg-gray-100 relative",{"bg-blue-100 dark:bg-blue-900":l(o.date),"bg-gray-100 dark:bg-gray-700":!o.isCurrentMonth}]),onClick:i=>D(o.date)},[s("div",pe,_(o.dayNumber),1),m.value[o.date]?(n(),r("div",fe,[(n(!0),r(f,null,x(m.value[o.date].slice(0,3),i=>(n(),r("span",{key:i.id,class:"w-2 h-2 rounded-full bg-blue-400"}))),128)),m.value[o.date].length>3?(n(),r("span",xe," +"+_(m.value[o.date].length-3),1)):C("",!0)])):C("",!0)],10,ge))),128))]),a[0]||(a[0]=s("div",{class:"w-full h-44"},null,-1))])}}},$e=j(we,[["__scopeId","data-v-54359931"]]);export{$e as default};
