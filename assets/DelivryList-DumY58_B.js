import{u as k}from"./deliveryStore-PtZE0C9f.js";import{x as C,u as S,r as b,a as m,o as f,b as t,g as s,v as g,h as l,f as o,X as $,j as v,w as F,l as M,F as U,B as V}from"./index-CgBs40KH.js";import{B as j}from"./BaseCrudTable-T2X6_6kN.js";import{_ as N}from"./BaseTableHeader-O855qQhE.js";import{u as T,S as Y}from"./useFormValidate-rQ8rGJw0.js";import{T as A}from"./trash-2-C0SWzlnu.js";/* empty css                                                                      */import"./plus-CPvJ2MNj.js";const E={class:"flex flex-col w-[700px]"},X={class:"flex justify-between modal-border items-center p-[14px] border-b shadow-sm"},I={class:"text-black text-md font-bold uppercase"},L={class:"flex flex-wrap -mx-2 p-4"},O={class:"w-full px-2 py-2"},P={class:"justify-end border-t modal-card modal-border flex items-center p-4"},B={__name:"DelivryForm",props:{id:{type:Number,default:null}},setup(h){const i=k(),n=C(),u=S(),{form:a,errors:p,validate:d,resetForm:e}=T({name:""},{name:{required:!0,message:"Majburiy"}}),c=h,r=!!c.id,x=async()=>{if(d())try{r?(await i.update(c.id,a),u.show("Muvaffaqiyatli yangilandi","success")):(await i.create(a),u.show("Muvaffaqiyatli yaratildi","success")),y(),e()}catch{u.show("Xatolik yuz berdi","")}},y=()=>n.close();return(q,_)=>{const w=b("UButton"),z=b("UInput");return f(),m("div",E,[t("div",X,[t("p",I,g(r?"Yangilash":"Yangi"),1),s(w,{customClass:"bg-[#475467] rounded-full p-1",onClick:y},{default:l(()=>[s(o($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t("form",{onSubmit:F(x,["prevent"]),class:"space-y-6"},[t("div",L,[t("div",O,[s(z,{modelValue:o(a).name,"onUpdate:modelValue":_[0]||(_[0]=D=>o(a).name=D),label:"Yetkazib berish",placeholder:"Yetkazib berish turlarini kiriting",error:o(p).name_oz},null,8,["modelValue","error"])])]),t("div",P,[s(w,{variant:"ghost",type:"button",onClick:y,disabled:o(i).loading},{default:l(()=>[..._[1]||(_[1]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(w,{type:"submit",variant:"primary",loading:o(i).loading},{default:l(()=>[v(g(r?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},Q={class:"max-w-xl max-h-xl"},G={class:"justify-between border-b modal-card flex items-center p-4"},H={class:"justify-end border-t modal-card flex gap-2 p-4"},J={__name:"DelivryDelete",props:{id:{type:Number,required:!0}},setup(h){const i=h,n=k(),u=S(),a=C(),p=async()=>{try{await n.remove(i.id),u.show("Muvaffaqiyatli o‘chirildi!","success"),a.close()}catch(d){u.show("Xatolik yuz berdi!","error"),console.error(d)}};return(d,e)=>{const c=b("UButton");return f(),m("div",Q,[t("div",G,[e[2]||(e[2]=t("p",{class:"text-black text-md font-bold uppercase"},"O‘chirish",-1)),s(c,{customClass:"bg-[#475467] rounded-full p-1",onClick:e[0]||(e[0]=r=>o(a).close())},{default:l(()=>[s(o($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e[5]||(e[5]=t("div",{class:"p-4 text-center space-y-4"},[t("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),t("div",H,[s(c,{variant:"ghost",onClick:e[1]||(e[1]=r=>o(a).close()),disabled:o(n).loading},{default:l(()=>[...e[3]||(e[3]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(c,{variant:"danger",onClick:p,loading:o(n).loading},{default:l(()=>[...e[4]||(e[4]=[v(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},K={class:"flex flex-col gap-4 items-center"},R={class:"px-4 py-3 border-r"},W={class:"px-4 py-3 flex"},ie={__name:"DelivryList",setup(h){const i=k(),n=C(),u=()=>n.open(B),a=d=>n.open(B,{id:d}),p=d=>n.open(J,{id:d});return M(()=>i.fetchAll()),(d,e)=>{const c=b("UButton");return f(),m("div",K,[s(N,{title:"Yetkazib beruvchilar ro'yxati",buttonText:"Qo‘shish",onAddNew:u}),s(j,null,{thead:l(()=>[...e[0]||(e[0]=[t("th",{class:"table-header uppercase"},"Manzil",-1),t("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:l(()=>[(f(!0),m(U,null,V(o(i).list,r=>(f(),m("tr",{key:r.id,class:"hover:bg-[#F4F6FC]"},[t("td",R,g(r.name),1),t("td",W,[s(c,{variant:"hover",onClick:x=>a(r.id)},{default:l(()=>[s(o(Y),{class:"w-5 h-5"})]),_:1},8,["onClick"]),s(c,{variant:"hover",onClick:x=>p(r.id)},{default:l(()=>[s(o(A),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{ie as default};
