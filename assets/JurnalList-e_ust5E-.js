import{u as k}from"./jurnalStore-0dvNM4Hs.js";import{u as S,x as C,r as x,a as m,o as f,b as t,g as o,h as l,f as s,X as $,j as b,v as g,w as M,l as j,F as J,B as N}from"./index-5YwSdCnv.js";import{B as V}from"./BaseCrudTable-CjDNjMgw.js";import{_ as T}from"./BaseTableHeader-CGL6DNdt.js";import{u as z,S as D}from"./useFormValidate-CYKOA1hY.js";import{T as A}from"./trash-2-BBDNetmq.js";/* empty css                                                                      */import"./plus-Dprf8d8-.js";const E={class:"max-w-xl max-h-xl"},X={class:"flex justify-between modal-border items-center p-[14px] border-b"},Y={class:"justify-end border-t modal-card flex gap-2 p-4"},I={__name:"JurnalDelete",props:{id:{type:Number,required:!0}},setup(h){const n=h,i=k(),u=S(),a=C(),p=async()=>{try{await i.remove(n.id),u.show("Muvaffaqiyatli o‘chirildi!","success"),a.close()}catch(d){u.show("Xatolik yuz berdi!","error"),console.error(d)}};return(d,e)=>{const c=x("UButton");return f(),m("div",E,[t("div",X,[e[2]||(e[2]=t("p",{class:"text-dark text-lg font-bold uppercase"},"O‘chirish",-1)),o(c,{customClass:"bg-[#475467] rounded-full p-1",onClick:e[0]||(e[0]=r=>s(a).close())},{default:l(()=>[o(s($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e[5]||(e[5]=t("div",{class:"p-4 text-center space-y-4"},[t("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),t("div",Y,[o(c,{onClick:e[1]||(e[1]=r=>s(a).close()),variant:"ghost",disabled:s(i).loading},{default:l(()=>[...e[3]||(e[3]=[b(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(c,{variant:"danger",onClick:p,loading:s(i).loading},{default:l(()=>[...e[4]||(e[4]=[b(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},L={class:"flex flex-col w-[700px]"},O={class:"flex justify-between modal-border items-center p-[14px] border-b"},P={class:"text-dark text-lg font-bold uppercase"},Q={class:"flex flex-wrap -mx-2 p-4"},G={class:"w-full px-2 py-2"},H={class:"justify-end border-t modal-card modal-border flex items-center p-4"},B={__name:"JurnalForm",props:{id:{type:Number,default:null}},setup(h){const n=k(),i=C(),u=S(),{form:a,errors:p,validate:d,resetForm:e}=z({name:""},{name:{required:!0,message:"Majburiy"}}),c=h,r=!!c.id,v=async()=>{if(d())try{r?(await n.update(c.id,a),u.show("Muvaffaqiyatli yangilandi","success")):(await n.create(a),u.show("Muvaffaqiyatli yaratildi","success")),y(),e()}catch{u.show("Xatolik yuz berdi","")}},y=()=>i.close();return(q,_)=>{const w=x("UButton"),F=x("UInput");return f(),m("div",L,[t("div",O,[t("p",P,g(r?"Yangilash":"Yangi"),1),o(w,{customClass:"bg-[#475467] rounded-full p-1",onClick:y},{default:l(()=>[o(s($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t("form",{onSubmit:M(v,["prevent"]),class:"space-y-6"},[t("div",Q,[t("div",G,[o(F,{modelValue:s(a).name,"onUpdate:modelValue":_[0]||(_[0]=U=>s(a).name=U),label:"Jurnal",placeholder:"Jurnal kiriting",error:s(p).name},null,8,["modelValue","error"])])]),t("div",H,[o(w,{type:"button",variant:"ghost",onClick:y,disabled:s(n).loading},{default:l(()=>[..._[1]||(_[1]=[b(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),o(w,{type:"submit",variant:"primary",loading:s(n).loading},{default:l(()=>[b(g(r?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},K={class:"flex flex-col gap-4 items-center"},R={class:"px-4 py-3 border-r"},W={class:"px-4 py-3 flex"},ne={__name:"JurnalList",setup(h){const n=k(),i=C(),u=()=>i.open(B),a=d=>i.open(B,{id:d}),p=d=>i.open(I,{id:d});return j(()=>n.fetchAll()),(d,e)=>{const c=x("UButton");return f(),m("div",K,[o(T,{title:"Jurnallar ro'yxati",buttonText:"Qo‘shish",onAddNew:u}),o(V,null,{thead:l(()=>[...e[0]||(e[0]=[t("th",{class:"table-header uppercase"},"Nomi",-1),t("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:l(()=>[(f(!0),m(J,null,N(s(n).jurnals,r=>(f(),m("tr",{key:r.id,class:"hover:bg-[#F4F6FC]"},[t("td",R,g(r.name),1),t("td",W,[o(c,{variant:"hover",onClick:v=>a(r.id)},{default:l(()=>[o(s(D),{class:"w-5 h-5"})]),_:1},8,["onClick"]),o(c,{variant:"hover",onClick:v=>p(r.id)},{default:l(()=>[o(s(A),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{ne as default};
