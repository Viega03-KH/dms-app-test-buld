import{u as k}from"./deliveryStore-CJvhQQ2s.js";import{x as C,u as S,r as x,a as m,o as f,b as t,g as s,v as g,h as a,f as o,X as $,j as v,w as D,l as M,F as U,C as j}from"./index-DirDpiKz.js";import{B as V}from"./BaseCrudTable-BSc-cSqg.js";import{I as Y}from"./IconBG-CnmyzwLi.js";import{u as N,S as T}from"./useFormValidate-DiuR9UEs.js";import{P as I}from"./plus-B6npwRQp.js";import{T as A}from"./trash-2-Dshkx7mY.js";/* empty css                                                                      */const E={class:"flex flex-col w-[700px]"},P={class:"flex justify-between modal-border items-center p-[14px] border-b shadow-sm"},X={class:"text-black text-md font-bold uppercase"},L={class:"flex flex-wrap -mx-2 p-4"},O={class:"w-full px-2 py-2"},G={class:"justify-end border-t modal-card modal-border flex items-center p-4"},B={__name:"DelivryForm",props:{id:{type:Number,default:null}},setup(h){const n=k(),d=C(),u=S(),{form:r,errors:p,validate:c,resetForm:e}=N({name:""},{name:{required:!0,message:"Majburiy"}}),l=h,i=!!l.id,_=async()=>{if(c())try{i?(await n.update(l.id,r),u.show("Muvaffaqiyatli yangilandi","success")):(await n.create(r),u.show("Muvaffaqiyatli yaratildi","success")),y(),e()}catch{u.show("Xatolik yuz berdi","")}},y=()=>d.close();return(q,b)=>{const w=x("UButton"),z=x("UInput");return f(),m("div",E,[t("div",P,[t("p",X,g(i?"Yangilash":"Yangi"),1),s(w,{customClass:"bg-[#475467] rounded-full p-1",onClick:y},{default:a(()=>[s(o($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t("form",{onSubmit:D(_,["prevent"]),class:"space-y-6"},[t("div",L,[t("div",O,[s(z,{modelValue:o(r).name,"onUpdate:modelValue":b[0]||(b[0]=F=>o(r).name=F),label:"Yetkazib berish",placeholder:"Yetkazib berish turlarini kiriting",error:o(p).name_oz},null,8,["modelValue","error"])])]),t("div",G,[s(w,{variant:"ghost",type:"button",onClick:y,disabled:o(n).loading},{default:a(()=>[...b[1]||(b[1]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(w,{type:"submit",variant:"primary",loading:o(n).loading},{default:a(()=>[v(g(i?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},Q={class:"max-w-xl max-h-xl"},H={class:"justify-between border-b modal-card flex items-center p-4"},J={class:"justify-end border-t modal-card flex gap-2 p-4"},K={__name:"DelivryDelete",props:{id:{type:Number,required:!0}},setup(h){const n=h,d=k(),u=S(),r=C(),p=async()=>{try{await d.remove(n.id),u.show("Muvaffaqiyatli o‘chirildi!","success"),r.close()}catch(c){u.show("Xatolik yuz berdi!","error"),console.error(c)}};return(c,e)=>{const l=x("UButton");return f(),m("div",Q,[t("div",H,[e[2]||(e[2]=t("p",{class:"text-black text-md font-bold uppercase"},"O‘chirish",-1)),s(l,{customClass:"bg-[#475467] rounded-full p-1",onClick:e[0]||(e[0]=i=>o(r).close())},{default:a(()=>[s(o($),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e[5]||(e[5]=t("div",{class:"p-4 text-center space-y-4"},[t("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),t("div",J,[s(l,{variant:"ghost",onClick:e[1]||(e[1]=i=>o(r).close()),disabled:o(d).loading},{default:a(()=>[...e[3]||(e[3]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(l,{variant:"danger",onClick:p,loading:o(d).loading},{default:a(()=>[...e[4]||(e[4]=[v(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},R={class:"flex flex-col gap-2 items-center"},W={class:"relative flex rounded-md bg-[#0F172A] shadow-sm flex-col gap-5 sm:flex-row sm:items-center sm:justify-between p-6 w-full overflow-hidden"},Z={class:"px-4 py-3 border-r"},ee={class:"px-4 py-3 flex"},de={__name:"DelivryList",setup(h){const n=k(),d=C(),u=()=>d.open(B),r=c=>d.open(B,{id:c}),p=c=>d.open(K,{id:c});return M(()=>n.fetchAll()),(c,e)=>{const l=x("UButton");return f(),m("div",R,[t("div",W,[s(Y),e[1]||(e[1]=t("h1",{class:"text-md font-extrabold uppercase text-gray-100"}," Yetkazib beruvchilar ro'yxati ",-1)),s(l,{class:"z-10",variant:"primary",onClick:u},{default:a(()=>[s(o(I),{"stroke-width":"3"}),e[0]||(e[0]=t("span",{class:"px-1"},"Qo‘shish",-1))]),_:1})]),s(V,null,{thead:a(()=>[...e[2]||(e[2]=[t("th",{class:"table-header uppercase"},"Manzil",-1),t("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:a(()=>[(f(!0),m(U,null,j(o(n).list,i=>(f(),m("tr",{key:i.id,class:"hover:bg-[#F4F6FC]"},[t("td",Z,g(i.name),1),t("td",ee,[s(l,{variant:"hover",onClick:_=>r(i.id)},{default:a(()=>[s(o(T),{class:"w-5 h-5"})]),_:1},8,["onClick"]),s(l,{variant:"hover",onClick:_=>p(i.id)},{default:a(()=>[s(o(A),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{de as default};
