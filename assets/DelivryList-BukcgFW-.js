import{x as k,u as B,r as _,a as m,o as f,b as e,g as s,v as h,h as r,f as o,j as v,w as q,l as z,J as F,K as j,L as U}from"./index-CkYps7b0.js";import{u as C}from"./deliveryStore-BPAqVBc3.js";import{I as V,B as I}from"./IconBG-CCKUmUJ-.js";import{u as N,X as D}from"./useFormValidate-CxOIEp00.js";import{P as T}from"./plus-BbJxjYiT.js";import{S as A}from"./square-pen-Dc0dSIea.js";import{T as E}from"./trash-2-DzZfIUqq.js";const L={class:"flex flex-col w-[700px]"},P={class:"flex justify-between modal-border items-center p-[14px] border-b shadow-sm"},X={class:"text-black text-md font-bold uppercase"},O={class:"flex flex-wrap -mx-2 p-4"},G={class:"w-full px-2 py-2"},J={class:"justify-end border-t modal-card modal-border flex items-center p-4"},$={__name:"DelivryForm",props:{id:{type:Number,default:null}},setup(b){const n=C(),d=k(),p=B(),{form:l,errors:u,validate:c,resetForm:t}=N({name:""},{name:{required:!0,message:"Majburiy"}}),i=b,a=!!i.id,y=async()=>{if(c())try{a?(await n.update(i.id,l),p.show("Muvaffaqiyatli yangilandi","succsess")):(await n.create(l),p.show("Muvaffaqiyatli yaratildi","succsess")),w(),t()}catch{p.show("Xatolik yuz berdi","")}},w=()=>d.close();return(S,x)=>{const g=_("UButton"),M=_("UInput");return f(),m("div",L,[e("div",P,[e("p",X,h(a?"Yangilash":"Yangi"),1),s(g,{customClass:"bg-[#475467] rounded-full p-1",onClick:w},{default:r(()=>[s(o(D),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),e("form",{onSubmit:q(y,["prevent"]),class:"space-y-6"},[e("div",O,[e("div",G,[s(M,{modelValue:o(l).name,"onUpdate:modelValue":x[0]||(x[0]=Y=>o(l).name=Y),label:"Yetkazib berish",placeholder:"Yetkazib berish turlarini kiriting",error:o(u).name_oz},null,8,["modelValue","error"])])]),e("div",J,[s(g,{variant:"ghost",type:"button",onClick:w,disabled:o(n).loading},{default:r(()=>[...x[1]||(x[1]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(g,{type:"submit",variant:"primary",loading:o(n).loading},{default:r(()=>[v(h(a?"Yangilash":"Saqlash"),1)]),_:1},8,["loading"])])],32)])}}},K={class:"max-w-xl max-h-xl"},Q={class:"justify-between border-b modal-card flex items-center p-4"},H={class:"justify-end border-t modal-card flex gap-2 p-4"},R={__name:"DelivryDelete",props:{id:{type:Number,required:!0}},setup(b){const n=b,d=C(),p=B(),l=k(),u=async()=>{try{await d.remove(n.id),p.show("Muvaffaqiyatli o‘chirildi!","success"),l.close()}catch(c){p.show("Xatolik yuz berdi!","error"),console.error(c)}};return(c,t)=>{const i=_("UButton");return f(),m("div",K,[e("div",Q,[t[2]||(t[2]=e("p",{class:"text-black text-md font-bold uppercase"},"O‘chirish",-1)),s(i,{customClass:"bg-[#475467] rounded-full p-1",onClick:t[0]||(t[0]=a=>o(l).close())},{default:r(()=>[s(o(D),{"stroke-width":"3",class:"w-4 h-4 text-white"})]),_:1})]),t[5]||(t[5]=e("div",{class:"p-4 text-center space-y-4"},[e("p",{class:"text-base text-dark"}," Siz rostdan hamo o‘chirmoqchimisiz? ")],-1)),e("div",H,[s(i,{variant:"ghost",onClick:t[1]||(t[1]=a=>o(l).close()),disabled:o(d).loading},{default:r(()=>[...t[3]||(t[3]=[v(" Bekor qilish ",-1)])]),_:1},8,["disabled"]),s(i,{variant:"danger",onClick:u,loading:o(d).loading},{default:r(()=>[...t[4]||(t[4]=[v(" O‘chirish ",-1)])]),_:1},8,["loading"])])])}}},W={class:"flex flex-col items-center"},Z={class:"relative flex bg-[#0F172A] shadow-sm flex-col gap-5 sm:flex-row sm:items-center sm:justify-between p-6 w-full overflow-hidden"},ee={class:"px-4 py-3 border-r"},te={class:"px-4 py-3 border-r"},se={class:"px-4 py-3 border-r"},oe={class:"px-4 py-3 flex justify-center gap-2"},pe={__name:"DelivryList",setup(b){const n=C(),d=k(),p=()=>d.open($),l=c=>d.open($,{id:c}),u=c=>d.open(R,{id:c});return z(()=>n.fetchAll()),(c,t)=>{const i=_("UButton");return f(),m("div",W,[e("div",Z,[s(V),t[1]||(t[1]=e("h1",{class:"text-md font-extrabold uppercase text-gray-100"}," Yetkazib beruvchilar ro'yxati ",-1)),s(i,{class:"z-10",variant:"primary",onClick:p},{default:r(()=>[s(o(T),{"stroke-width":"3"}),t[0]||(t[0]=e("span",{class:"px-1"},"Qo‘shish",-1))]),_:1})]),s(I,null,{thead:r(()=>[...t[2]||(t[2]=[e("th",{class:"table-header uppercase"},"ID",-1),e("th",{class:"table-header uppercase"},"Manzil",-1),e("th",{class:"table-header uppercase"},"Yaratilgan",-1),e("th",{class:"table-header uppercase"},"Tahrirlash",-1)])]),tbody:r(()=>[(f(!0),m(F,null,j(o(n).list,a=>(f(),m("tr",{key:a.id,class:"hover:bg-[#F4F6FC]"},[e("td",ee,"ID-"+h(a.id),1),e("td",te,h(a.name),1),e("td",se,h(o(U)(a.DelivryFormd_at).format("DD MMMM YYYY")),1),e("td",oe,[s(i,{variant:"hover",onClick:y=>l(a.id)},{default:r(()=>[s(o(A),{class:"w-5 h-5"})]),_:1},8,["onClick"]),s(i,{variant:"hover",onClick:y=>u(a.id)},{default:r(()=>[s(o(E),{class:"w-5 h-5 text-red-500"})]),_:1},8,["onClick"])])]))),128))]),_:1})])}}};export{pe as default};
