import{k as D,R as B,B as j,O as I,a as m,o as n,b as t,f as a,v as b,c as f,n as M,H as Y,q as $,g as l,F as T,C as P,x as N,A as z,l as K,t as Q,h,D as v,U as L,V as F,s as O}from"./index-CCDjh50H.js";import{_ as u,S as C}from"./UInfoItem-DR3coP1g.js";import{_ as R}from"./UFileCard-BpT-hOtE.js";import{u as E,_ as J,a as q}from"./CreateDockForm-BaogNbGw.js";import{_ as X}from"./TaskForm-DmkV3Tr1.js";import{_ as G}from"./UPagination-DHY0kFLz.js";import{P as W}from"./plus-C3tzjb3u.js";import{S as Z}from"./useFormValidate-PzpJs8mc.js";import{T as ee}from"./trash-2-BREhF32t.js";import"./OrganizationForm-uKs-aIhQ.js";import"./doctypeStore-Bw66I_yg.js";import"./deliveryStore-CKlB9Uuj.js";import"./jurnalStore-BZkOrUQ8.js";import"./cloud-upload-CPdEKmpK.js";import"./taskStore-6dywxdbk.js";import"./usersStore-BJgSVqfi.js";import"./subjectStore-DPng6cT9.js";import"./MultiColumnUserSelect-DAuuT935.js";import"./chevron-left-BlZX--ht.js";import"./chevron-right-WHC7EkOp.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=D("combine",[["path",{d:"M10 18H5a3 3 0 0 1-3-3v-1",key:"ru65g8"}],["path",{d:"M14 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"e30een"}],["path",{d:"M20 2a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2",key:"2ahx8o"}],["path",{d:"m7 21 3-3-3-3",key:"127cv2"}],["rect",{x:"14",y:"14",width:"8",height:"8",rx:"2",key:"1b0bso"}],["rect",{x:"2",y:"2",width:"8",height:"8",rx:"2",key:"1x09vl"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=D("file-input",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=D("notepad-text-dashed",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"j91f56"}],["path",{d:"M20 12v2",key:"w8o0tu"}],["path",{d:"M20 18v2a2 2 0 0 1-2 2h-1",key:"1c9ggx"}],["path",{d:"M13 22h-2",key:"191ugt"}],["path",{d:"M7 22H6a2 2 0 0 1-2-2v-2",key:"1rt9px"}],["path",{d:"M4 14v-2",key:"1v0sqh"}],["path",{d:"M4 8V6a2 2 0 0 1 2-2h2",key:"1mwabg"}],["path",{d:"M8 10h6",key:"3oa6kw"}],["path",{d:"M8 14h8",key:"1fgep2"}],["path",{d:"M8 18h5",key:"17enja"}]]),se={class:"flex flex-row"},ae={class:"flex-1 min-w-0"},le={class:"flex items-center justify-between"},oe={class:"flex flex-col py-2"},ie={class:"flex items-center justify-between"},ne={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},de={class:"flex-1 min-w-0 py-1 text-sm font-medium text-[#697696] line-clamp-2"},re="task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",ce={__name:"DockListItem",props:{dock:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(o){const e=B(),d=(y,i)=>{e.open(y,{x:i.clientX+10,y:i.clientY+10})},p=o,g=j(()=>I(p.dock.doc_date).format("DD MMMM YYYY")),w={attached:{name:"Asosiy file mavjud",icon:V,color:"text-green-500"},draft:{name:"File mavjud emas.",icon:te,color:"text-yellow-500"}},x=j(()=>w[p.dock.status]||{name:"Noma'lum",icon:V,color:"text-gray-500"});return(y,i)=>(n(),m("div",{onClick:i[6]||(i[6]=r=>y.$emit("select",o.dock)),class:M([re,o.active?"bg-[#4076FF0D]":""])},[t("div",se,[t("div",ae,[t("div",le,[t("h4",{onMouseenter:i[0]||(i[0]=r=>d("Kiruvchi raqam",r)),onMouseleave:i[1]||(i[1]=r=>a(e).close()),class:"text-sm font-extrabold text-black"},b(o.dock.in_number),33),t("h4",{onMouseenter:i[2]||(i[2]=r=>d("Ro`yxarga olingan sana",r)),onMouseleave:i[3]||(i[3]=r=>a(e).close()),class:"text-sm font-medium text-[#697696]"},b(g.value),33)]),t("div",oe,[t("div",ie,[t("span",ne,b(o.dock.in_date),1),(n(),f(Y(x.value.icon),{class:M(["w-5 h-5",x.value.color]),onMouseenter:i[4]||(i[4]=r=>d(x.value.name,r)),onMouseleave:i[5]||(i[5]=r=>a(e).close())},null,40,["class"]))]),t("span",de,b(o.dock.summary),1)])])])],2))}},ue={key:0},me={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},pe={key:0},he={class:"grid grid-cols-2 gap-2"},ve={__name:"DockShowItem",props:{dockfile:{type:Object,default:null}},setup(o){return(e,d)=>o.dockfile?(n(),m("div",ue,[t("div",me,[l(u,{label:"Chiqish sansi",value:o.dockfile.in_date},null,8,["value"]),l(u,{label:"Chiqish raqami",value:o.dockfile.out_number},null,8,["value"]),l(u,{label:"Kelib tushgan raqam",value:o.dockfile.in_number},null,8,["value"]),l(u,{label:"Hujjat nomi",value:o.dockfile.title,class:"md:col-span-2"},null,8,["value"]),l(u,{label:"Qisqa mazmun",value:o.dockfile.summary,class:"md:col-span-2"},null,8,["value"]),l(u,{label:"Tashkilot",value:o.dockfile.sender?.name},null,8,["value"]),l(u,{label:"Hujjat turi",value:o.dockfile.document_type?.name},null,8,["value"]),l(u,{label:"Yetkazib berish usuli",value:o.dockfile.delivery_type?.name},null,8,["value"]),l(u,{label:"Jurnal",value:o.dockfile.journal.name},null,8,["value"])]),o.dockfile.attachments?.length?(n(),m("div",pe,[d[0]||(d[0]=t("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),t("div",he,[(n(!0),m(T,null,P(o.dockfile.attachments,p=>(n(),f(R,{key:p.id,file:p},null,8,["file"]))),128))])])):$("",!0)])):$("",!0)}},ke={class:"mx-auto"},fe={class:"grid grid-cols-1 lg:grid-cols-12"},xe={class:"col-span-12 md:col-span-5 2xl:col-span-3"},ye={class:"card-dark border-b-2 border-x shadow-sm"},be={class:"flex px-1 py-3 items-center border-b card-border justify-between"},ge={class:"flex items-center"},we={class:"flex gap-1"},_e={class:"h-[calc(100vh-8rem)] overflow-y-auto"},De={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-3 h-[calc(100vh-4rem)] overflow-y-auto"},je={class:"card-dark rounded-b border-b border-x"},Me={key:0},$e={class:"flex px-1 py-2 items-center border-b card-border justify-between"},Fe={class:"flex items-center gap-2"},Ce={class:"flex justify-end p-4 bg-[#F4F6FC]"},qe={key:1,class:"flex flex-col"},Ve={class:"grid grid-cols-3 p-6 gap-4"},Se={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},Ze={__name:"TransmittedViews",setup(o){const e=E(),d=N(),p=[{label:"Qoralama hujjatlar",name:"draft"},{label:"Ro`yxatga olingan hujjatlar",name:"attached"}],g=k=>e.fetchAll(k),w=k=>{e.selectedDock=k},x=()=>{e.selectedDock=null},y=()=>e.fetchAll(1),i=()=>{e.status="",e.in_number="",e.out_number="",e.fetchAll(1)},r=()=>{e.selectedDock&&d.open(X,{id:e.selectedDock.id})},H=()=>{e.selectedDock&&d.open(J,{selectedFile:e.selectedDock})},U=()=>{e.selectedDock&&d.open(q,{fileID:e.selectedDock.id})},A=()=>{e.selectedDock&&d.open(q,{file:e.selectedDock})};return z(()=>e.docks,k=>{if(e.selectedDock){const s=k.find(_=>_.id===e.selectedDock.id);s?e.selectedDock=s:e.selectedDock=null}},{deep:!0}),K(()=>{e.fetchAll(1)}),(k,s)=>{const _=O("wave");return n(),m("div",ke,[t("div",fe,[t("div",xe,[t("div",ye,[t("div",be,[t("div",ge,[Q((n(),f(v,{onClick:x,variant:"hover"},{default:h(()=>[l(a(C),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[_]]),s[3]||(s[3]=t("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Hujjatlar",-1))]),t("div",we,[l(G,{currentPage:a(e).pagination.currentPage,previous:a(e).pagination.previous,next:a(e).pagination.next,lastPage:Math.ceil(a(e).pagination.count/10),total:a(e).pagination.count,loading:a(e).loading,onChange:g},null,8,["currentPage","previous","next","lastPage","total","loading"])])]),t("div",_e,[(n(!0),m(T,null,P(a(e).docks,c=>(n(),f(ce,{key:c.id,dock:c,active:a(e).selectedDock?.id===c.id,onSelect:w},null,8,["dock","active"]))),128)),s[4]||(s[4]=t("div",{class:"h-24 w-full"},null,-1))])])]),t("div",De,[t("div",je,[a(e).selectedDock?(n(),m("div",Me,[t("div",$e,[s[7]||(s[7]=t("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Kiruvchi hujjat",-1)),t("div",Fe,[l(v,{onClick:r,variant:"primary"},{default:h(()=>[l(a(W),{"stroke-width":"3",class:"text-white"}),s[5]||(s[5]=t("span",{class:"px-1"},"Topshiriq yaratish",-1))]),_:1}),l(v,{onClick:H,variant:"primary"},{default:h(()=>[l(a(Z),{"stroke-width":"3",class:"text-white w-6 h-4"}),s[6]||(s[6]=t("span",{class:"px-1"},"Tahrirlash",-1))]),_:1})])]),l(ve,{dockfile:a(e).selectedDock,class:"p-6"},null,8,["dockfile"]),t("div",Ce,[a(e).selectedDock?.attachments?.length?(n(),f(v,{key:0,onClick:A,variant:"primary"},{default:h(()=>[l(a(S),{"stroke-width":"2",class:"text-white"}),s[8]||(s[8]=t("span",{class:"px-1"},"File va ilovani yangilash",-1))]),_:1})):(n(),f(v,{key:1,onClick:U,variant:"primary"},{default:h(()=>[l(a(S),{"stroke-width":"2",class:"text-white"}),s[9]||(s[9]=t("span",{class:"px-1"},"File va ilova qo'shish",-1))]),_:1}))])])):(n(),m("div",qe,[t("div",null,[s[10]||(s[10]=t("div",{class:"flex p-3 items-center card-border border-b justify-between"},[t("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),t("div",Ve,[l(L,{modelValue:a(e).status,"onUpdate:modelValue":s[0]||(s[0]=c=>a(e).status=c),options:p,"option-label":"label","option-value":"name",placeholder:"Hujjat holati"},null,8,["modelValue"]),l(F,{modelValue:a(e).in_number,"onUpdate:modelValue":s[1]||(s[1]=c=>a(e).in_number=c),placeholder:"Kiruvchi hujjat raqami"},null,8,["modelValue"]),l(F,{modelValue:a(e).out_number,"onUpdate:modelValue":s[2]||(s[2]=c=>a(e).out_number=c),placeholder:"Chiqish hujjat raqami"},null,8,["modelValue"])])]),t("div",Se,[l(v,{class:"flex items-center",onClick:i},{default:h(()=>[l(a(ee),{"stroke-width":"2.5",class:"w-5 h-5"}),s[11]||(s[11]=t("span",{class:"px-2"},"Tozalash",-1))]),_:1}),l(v,{variant:"primary",class:"flex items-center",onClick:y},{default:h(()=>[l(a(C),{"stroke-width":"2.5",class:"w-5 h-5"}),s[12]||(s[12]=t("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))])])])])}}};export{Ze as default};
