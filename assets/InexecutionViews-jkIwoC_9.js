import{k as q,a as r,o,b as e,v as i,f as n,L as b,g as l,n as Y,q as p,J as g,K as $,c as _,x as P,d as U,N as H,l as I,t as z,h as k,r as h,s as L}from"./index-NpEBLJbS.js";import{H as N}from"./history-BAWKp9l6.js";import{_ as m,a as O,S as y}from"./UFileCard-BCLyN-Mq.js";import{_ as A}from"./UPagination-BF3pV6WL.js";import{_ as E}from"./TaskForm-DciPD8jY.js";import{u as J}from"./taskStore-Cyz-P3fR.js";import{S as K}from"./square-pen-B9o_X7_l.js";import{T as Q}from"./trash-2-WhNS214r.js";import"./chevron-left-RJlNLR7z.js";import"./chevron-right-6akXjBU1.js";import"./usersStore-C98-mjs6.js";import"./subjectStore-YrW79kyc.js";import"./useFormValidate-DJC7jpxC.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=q("calendar-fold",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 17V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11Z",key:"kg77oy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M15 22v-4a2 2 0 0 1 2-2h4",key:"1gnbqr"}]]),Z={class:"flex flex-row"},G={class:"flex-1 min-w-0"},W={class:"flex flex-row items-center justify-between pb-2"},X={class:"text-sm font-extrabold text-black"},ee={class:"text-sm font-medium text-[#697696]"},te={class:"flex flex-col gap-y-2"},se={class:"flex flex-row items-center justify-between"},ae={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},le={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},ne={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},ie={class:"inline-block card-dark border text-[14px] font-semibold text-black rounded-[10px] px-3 py-2 w-fit"},oe="task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",de={__name:"TaskListItem",props:{task:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(t){return(s,c)=>(o(),r("div",{onClick:c[0]||(c[0]=f=>s.$emit("select",t.task)),class:Y([oe,t.active?"bg-[#4076FF0D]":""])},[e("div",Z,[e("div",G,[e("div",W,[e("h4",X,i(t.task.document.in_number),1),e("h4",ee,i(n(b)(t.task.doc_data).format("DD MMMM YYYY")),1)]),e("div",te,[e("div",se,[e("span",ae,i(t.task.subject.title),1),l(n(N),{class:"w-5 h-5 text-blue-500"})]),e("span",le,i(t.task.document.summary),1),e("span",ne," Bajarish mudati: "+i(n(b)(t.task.due_date).format("DD MMMM YYYY")),1),e("div",ie,i(t.task.assignees[0].father_name[0])+"."+i(t.task.assignees[0].first_name[0])+"."+i(t.task.assignees[0].last_name),1)])])])],2))}},re={key:0},ce={class:"grid grid-cols-2 gap-4 pb-4 p-[24px]"},ue={class:"wofull flex border-t justify-between px-[24px] hover:bg-[#F4F6FC]"},me={class:"col-span-2 py-4 cursor-pointer rounded flex items-center gap-3 transition"},fe={class:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-500 text-white font-bold text-sm uppercase"},ve={class:"flex flex-col text-sm"},xe={class:"text-dark text-lg font-bold"},ke={class:"text-dark text-lg"},pe={class:"flex flex-row gap-4 items-center"},he={key:1,class:"p-[24px]"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},ge={key:0},_e={class:"grid grid-cols-2 gap-2"},we={__name:"TaskShowItem",props:{task:{type:Object,default:null}},setup(t){return(s,c)=>(o(),r(g,null,[t.task?(o(),r("div",re,[e("div",ce,[l(m,{label:"Bajarish muddati",value:t.task.due_date},null,8,["value"]),l(m,{label:"Topshiriq",value:t.task.subject.title},null,8,["value"]),l(m,{label:"Topshiriq mazmun",value:t.task.description,class:"col-span-2"},null,8,["value"])]),e("div",ue,[e("div",me,[e("div",fe,i(t.task.assignees[0].first_name[0]),1),e("div",ve,[e("span",xe,i(t.task.assignees[0].last_name)+" "+i(t.task.assignees[0].first_name)+" "+i(t.task.assignees[0].father_name),1),e("span",ke,i(t.task.department_name),1)])]),e("div",pe,[e("h1",null,i(n(b)(t.task.due_date).format("DD MMMM YYYY")),1),l(n(R),{class:"text-blue-500"})])]),c[0]||(c[0]=e("div",{class:"bg-[#F4F6FC] w-full h-14"},null,-1))])):p("",!0),t.task.document?(o(),r("div",he,[e("div",be,[l(m,{label:"Kelib tushgan raqam",value:t.task.document.in_number},null,8,["value"]),l(m,{label:"Chiqish raqami",value:t.task.document.out_number},null,8,["value"]),l(m,{label:"Hujjat nomi",value:t.task.document.title,class:"md:col-span-2"},null,8,["value"]),l(m,{label:"Hujjat nomi",value:t.task.document.summary,class:"md:col-span-2"},null,8,["value"]),l(m,{label:"Hujjatni Imzololovchi",value:t.task.document.signer},null,8,["value"]),l(m,{label:"Jurnal",value:t.task.document.journal.name},null,8,["value"])]),t.task.document.attachments?.length?(o(),r("div",ge,[c[1]||(c[1]=e("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),e("div",_e,[(o(!0),r(g,null,$(t.task.document.attachments,f=>(o(),_(O,{key:f.id,file:f},null,8,["file"]))),128))])])):p("",!0)])):p("",!0)],64))}},ye={class:"mx-auto"},$e={class:"grid grid-cols-1 lg:grid-cols-12"},Fe={class:"col-span-12 md:col-span-5 2xl:col-span-3"},je={class:"card-dark border-b-2 border-x shadow-sm"},Me={class:"flex px-1 py-3 items-center border-b card-border justify-between"},Te={class:"flex items-center"},Ce={class:"flex gap-1"},De={class:"h-[calc(100vh-8rem)] overflow-y-auto"},Se={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-3 h-[calc(100vh-4rem)] overflow-y-auto"},Ve={class:"card-dark rounded-b border-b border-x"},Be={key:0},qe={class:"flex px-1 py-2 items-center border-b card-border justify-between"},Ye={class:"flex items-center gap-2"},Pe={key:1,class:"flex flex-col"},Ue={class:"grid grid-cols-3 p-6 gap-4"},He={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},We={__name:"InexecutionViews",setup(t){const s=J(),c=P(),f=U(null),d=H({due_date:"",assignee:"",created_at:""}),F=[{label:"Bajarilgan",name:"done"},{label:"Bajarilmoqda",name:"in_progress"},{label:"Bajarilmadi",name:"be_rejected"}],j=v=>s.setSelectedTask(v),M=v=>s.fetchAll(v),T=()=>{s.selectedTask&&c.open(E,{existingTask:{...s.selectedTask}})},C=()=>s.setSelectedTask(null),D=async()=>{await s.setFilter("status",f.value||""),await s.setFilter("due_date",d.due_date),await s.setFilter("assignee",d.assignee),await s.setFilter("created_at",d.created_at)},S=async()=>{f.value=null,d.due_date="",d.assignee="",d.created_at="",await s.setFilter("status",""),await s.setFilter("due_date",""),await s.setFilter("assignee",""),await s.setFilter("created_at","")};return I(()=>s.fetchAll()),(v,a)=>{const x=h("UButton"),V=h("USelect"),w=h("UDatePicker"),B=L("wave");return o(),r("div",ye,[e("div",$e,[e("div",Fe,[e("div",je,[e("div",Me,[e("div",Te,[z((o(),_(x,{onClick:C,variant:"hover"},{default:k(()=>[l(n(y),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[B]]),a[3]||(a[3]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"}," Topshiriqlar ",-1))]),e("div",Ce,[l(A,{currentPage:n(s).pagination.currentPage,previous:n(s).pagination.previous,next:n(s).pagination.next,lastPage:Math.ceil(n(s).pagination.count/10),total:n(s).pagination.count,loading:n(s).loading,onChange:M},null,8,["currentPage","previous","next","lastPage","total","loading"])])]),e("div",De,[(o(!0),r(g,null,$(n(s).tasks,u=>(o(),_(de,{key:u.id,task:u,active:n(s).selectedTask?.id===u.id,onSelect:j},null,8,["task","active"]))),128)),a[4]||(a[4]=e("div",{class:"h-24 w-full"},null,-1))])])]),e("div",Se,[e("div",Ve,[n(s).selectedTask?(o(),r("div",Be,[e("div",qe,[a[6]||(a[6]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Biriktirilgan topshiriq",-1)),e("div",Ye,[l(x,{onClick:T,variant:"primary"},{default:k(()=>[l(n(K),{"stroke-width":"3",class:"text-white w-6 h-4"}),a[5]||(a[5]=e("span",{class:"px-1"},"Tahrirlash",-1))]),_:1})])]),l(we,{task:n(s).selectedTask},null,8,["task"]),a[7]||(a[7]=e("div",{class:"flex p-4 bg-[#F4F6FC]"},null,-1))])):(o(),r("div",Pe,[e("div",null,[a[8]||(a[8]=e("div",{class:"flex p-3 items-center card-border border-b justify-between"},[e("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),e("div",Ue,[l(V,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=u=>f.value=u),options:F,"option-label":"","option-value":"name",placeholder:"Hujjat holati"},null,8,["modelValue"]),l(w,{modelValue:d.due_date,"onUpdate:modelValue":a[1]||(a[1]=u=>d.due_date=u),label:"",placeholder:"Muddati"},null,8,["modelValue"]),l(w,{modelValue:d.created_at,"onUpdate:modelValue":a[2]||(a[2]=u=>d.created_at=u),label:"",placeholder:"Ro`yxatga olingan sana"},null,8,["modelValue"])])]),e("div",He,[l(x,{class:"flex items-center",onClick:S},{default:k(()=>[l(n(Q),{"stroke-width":"2.5",class:"w-5 h-5"}),a[9]||(a[9]=e("span",{class:"px-2"},"Tozalash",-1))]),_:1}),l(x,{variant:"primary",class:"flex items-center",onClick:D},{default:k(()=>[l(n(y),{"stroke-width":"2.5",class:"w-5 h-5"}),a[10]||(a[10]=e("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))]),a[11]||(a[11]=e("div",{class:"w-full h-48"},null,-1))])])])}}};export{We as default};
