import{a as c,o as i,b as e,v as p,f as o,O as k,n as V,q as _,g as l,j as Y,F as x,B as w,c as h,x as P,d as U,Q as I,l as z,R as N,t as O,h as b,r as g,s as H}from"./index-B35B4UKf.js";import{_ as m,a as Q}from"./UserListItem-B7ypK_c8.js";import{_ as A}from"./UFileCard-DlH3otsj.js";import{_ as E,S as $}from"./UPagination-MOyI9apS.js";import{_ as L}from"./TaskForm-uVbvNjWF.js";import{u as J}from"./taskStore-pDIxUUri.js";import{S as K}from"./useFormValidate-Dp1VxGow.js";import{T as R}from"./trash-2-DtKWE0ko.js";import"./chevron-left-X3F8JQ3y.js";import"./chevron-right-yCdt96Ii.js";import"./usersStore-0dGIKaFI.js";import"./subjectStore-TYSGAP3P.js";import"./MultiColumnUserSelect-DEGlll5b.js";const G={class:"flex flex-row"},W={class:"flex-1 min-w-0"},X={class:"flex flex-row items-center justify-between pb-2"},Z={class:"text-sm font-extrabold text-black"},ee={class:"text-sm font-medium text-[#697696]"},te={class:"flex flex-col gap-y-2"},se={class:"flex flex-row items-center justify-between"},ae={class:"flex-1 min-w-0 truncate text-sm font-bold text-black"},le={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},oe={class:"flex-1 min-w-0 text-sm font-medium text-[#697696] line-clamp-2"},ie="task card-dark border-b px-3 py-4 cursor-pointer hover:bg-[#4076FF0D]",ne={__name:"TaskListItem",props:{task:{type:Object,required:!0},active:{type:Boolean,default:!1}},setup(s){return(t,n)=>(i(),c("div",{onClick:n[0]||(n[0]=r=>t.$emit("select",s.task)),class:V([ie,s.active?"bg-[#4076FF0D]":""])},[e("div",G,[e("div",W,[e("div",X,[e("h4",Z,p(s.task.document.in_number),1),e("h4",ee,p(o(k)(s.task.doc_data).format("DD MMMM YYYY")),1)]),e("div",te,[e("div",se,[e("span",ae,p(s.task.document.out_number),1)]),e("span",le,p(s.task.document.summary),1),e("span",oe," Bajarish mudati: "+p(o(k)(s.task.due_date).format("DD MMMM YYYY")),1)])])])],2))}},de={key:0},re={class:"grid grid-cols-2 gap-4 pb-4 p-[24px]"},ce={class:"w-full flex flex-col border-t border-gray-100 bg-white shadow-sm rounded-lg mt-4"},ue={class:"flex items-center justify-between px-6 py-3 border-b border-gray-50"},me={class:"font-bold text-gray-800 text-base flex items-center gap-2"},pe={class:"ml-1 text-xs bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full"},ve={class:"max-h-[280px] overflow-y-auto custom-scrollbar"},fe={class:"divide-y divide-gray-100"},be={key:1,class:"p-[24px]"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pb-4"},he={key:0},_e={class:"grid grid-cols-2 gap-2"},ge={__name:"TaskShowItem",props:{task:{type:Object,default:null}},setup(s){return(t,n)=>(i(),c(x,null,[s.task?(i(),c("div",de,[e("div",re,[l(m,{label:"Bajarish muddati",value:o(k)(s.task.due_date).format("DD MMMM YYYY")},null,8,["value"]),l(m,{label:"Topshiriq",value:s.task.subject.title},null,8,["value"]),l(m,{label:"Topshiriq mazmun",value:s.task.description,class:"col-span-2"},null,8,["value"])]),e("div",ce,[e("div",ue,[e("h3",me,[n[0]||(n[0]=e("span",{class:"w-1.5 h-5 bg-blue-600 rounded-full"},null,-1)),n[1]||(n[1]=Y(" Ijrochilar ",-1)),e("span",pe,p(s.task.assignees?.length||0),1)])]),e("div",ve,[e("div",fe,[(i(!0),c(x,null,w(s.task.assignees,(r,d)=>(i(),h(Q,{key:r.id,user:r,"is-responsible":d===0},null,8,["user","is-responsible"]))),128))])])]),n[2]||(n[2]=e("div",{class:"bg-[#F4F6FC] w-full h-14"},null,-1))])):_("",!0),s.task.document?(i(),c("div",be,[e("div",xe,[l(m,{label:"Kiruvchi raqam",value:s.task.document.in_number},null,8,["value"]),l(m,{label:"Chiqish raqami",value:s.task.document.out_number},null,8,["value"]),l(m,{label:"Hujjat nomi",value:s.task.document.title,class:"md:col-span-2"},null,8,["value"]),l(m,{label:"Hujjat nomi",value:s.task.document.summary,class:"md:col-span-2"},null,8,["value"]),l(m,{label:"Hujjatni Imzololovchi",value:s.task.document.signer},null,8,["value"]),l(m,{label:"Jurnal",value:s.task.document.journal.name},null,8,["value"])]),s.task.document.attachments?.length?(i(),c("div",he,[n[3]||(n[3]=e("h3",{class:"font-semibold mb-2"},"Fayllar:",-1)),e("div",_e,[(i(!0),c(x,null,w(s.task.document.attachments,r=>(i(),h(A,{key:r.id,file:r},null,8,["file"]))),128))])])):_("",!0)])):_("",!0)],64))}},ke={class:"mx-auto"},we={class:"grid grid-cols-1 lg:grid-cols-12"},ye={class:"col-span-12 md:col-span-5 2xl:col-span-3"},$e={class:"card-dark border-b-2 border-x shadow-sm"},Fe={class:"flex px-1 py-3 items-center border-b card-border justify-between"},je={class:"flex items-center"},Te={class:"flex gap-1"},De={class:"h-[calc(100vh-8rem)] overflow-y-auto"},Se={class:"col-span-12 md:col-span-7 2xl:col-span-9 space-y-2 px-3 h-[calc(100vh-4rem)] overflow-y-auto"},qe={class:"card-dark rounded-b border-b border-x"},Ce={key:0},Me={class:"flex px-1 py-2 items-center border-b card-border justify-between"},Be={class:"flex items-center gap-2"},Ve={key:1,class:"flex flex-col"},Ye={class:"grid grid-cols-3 p-6 gap-4"},Pe={class:"flex bg-[#F4F6FC] items-center gap-4 justify-end p-6"},Ge={__name:"InexecutionViews",setup(s){const t=J(),n=P(),r=U(null),d=I({due_date:"",assignee:"",created_at:""}),F=[{label:"Bajarilgan",name:"done"},{label:"Tasdiqlshda",name:"in_confirmation"},{label:"Bajarilmoqda",name:"in_progress"},{label:"Bajarilmadi",name:"be_rejected"}],j=v=>t.setSelectedTask(v),T=v=>t.fetchAll(v),D=()=>{t.selectedTask&&n.open(L,{existingTask:{...t.selectedTask}})},S=()=>t.setSelectedTask(null),q=async()=>{await t.setFilter("status",r.value||""),await t.setFilter("due_date",d.due_date),await t.setFilter("assignee",d.assignee),await t.setFilter("created_at",d.created_at)},C=async()=>{r.value=null,d.due_date="",d.assignee="",d.created_at="",await t.setFilter("status",""),await t.setFilter("due_date",""),await t.setFilter("assignee",""),await t.setFilter("created_at","")};return z(()=>t.fetchAll()),N(()=>{t.filters={status:"",due_date:"",assignee:null,created_at:"",search:""},t.currentPage=1}),(v,a)=>{const f=g("UButton"),M=g("USelect"),y=g("UDatePicker"),B=H("wave");return i(),c("div",ke,[e("div",we,[e("div",ye,[e("div",$e,[e("div",Fe,[e("div",je,[O((i(),h(f,{onClick:S,variant:"hover"},{default:b(()=>[l(o($),{"stroke-width":"2",class:"w-6 h-6"})]),_:1})),[[B]]),a[3]||(a[3]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"}," Topshiriqlar ",-1))]),e("div",Te,[l(E,{currentPage:o(t).pagination.currentPage,previous:o(t).pagination.previous,next:o(t).pagination.next,lastPage:Math.ceil(o(t).pagination.count/10),total:o(t).pagination.count,loading:o(t).loading,onChange:T},null,8,["currentPage","previous","next","lastPage","total","loading"])])]),e("div",De,[(i(!0),c(x,null,w(o(t).tasks,u=>(i(),h(ne,{key:u.id,task:u,active:o(t).selectedTask?.id===u.id,onSelect:j},null,8,["task","active"]))),128)),a[4]||(a[4]=e("div",{class:"h-24 w-full"},null,-1))])])]),e("div",Se,[e("div",qe,[o(t).selectedTask?(i(),c("div",Ce,[e("div",Me,[a[6]||(a[6]=e("h2",{class:"text-[14px] p-2 font-bold uppercase text-[#282F3D]"},"Biriktirilgan topshiriq",-1)),e("div",Be,[l(f,{onClick:D,variant:"primary"},{default:b(()=>[l(o(K),{"stroke-width":"3",class:"text-white w-6 h-4"}),a[5]||(a[5]=e("span",{class:"px-1"},"Tahrirlash",-1))]),_:1})])]),l(ge,{task:o(t).selectedTask},null,8,["task"]),a[7]||(a[7]=e("div",{class:"flex p-4 bg-[#F4F6FC]"},null,-1))])):(i(),c("div",Ve,[e("div",null,[a[8]||(a[8]=e("div",{class:"flex p-3 items-center card-border border-b justify-between"},[e("h2",{class:"text-[14px] py-2 font-bold uppercase text-[#282F3D]"},"Qidirish")],-1)),e("div",Ye,[l(M,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=u=>r.value=u),options:F,"option-label":"","option-value":"name",placeholder:"Topshiriq holati"},null,8,["modelValue"]),l(y,{modelValue:d.due_date,"onUpdate:modelValue":a[1]||(a[1]=u=>d.due_date=u),label:"",placeholder:"Topshiriq muddati"},null,8,["modelValue"]),l(y,{modelValue:d.created_at,"onUpdate:modelValue":a[2]||(a[2]=u=>d.created_at=u),label:"",placeholder:"Topshiriq yaratilgan sana"},null,8,["modelValue"])])]),e("div",Pe,[l(f,{class:"flex items-center",onClick:C},{default:b(()=>[l(o(R),{"stroke-width":"2.5",class:"w-5 h-5"}),a[9]||(a[9]=e("span",{class:"px-2"},"Tozalash",-1))]),_:1}),l(f,{variant:"primary",class:"flex items-center",onClick:q},{default:b(()=>[l(o($),{"stroke-width":"2.5",class:"w-5 h-5"}),a[10]||(a[10]=e("span",{class:"px-2"},"Qidirish",-1))]),_:1})])]))]),a[11]||(a[11]=e("div",{class:"w-full h-48"},null,-1))])])])}}};export{Ge as default};
